<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Style Guide · JuMP</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-44252521-1', 'auto');
ga('send', 'pageview');
</script><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link href="assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><a href="index.html"><img class="logo" src="assets/logo.png" alt="JuMP logo"/></a><h1>JuMP</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="search.html"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="index.html">Introduction</a></li><li><a class="toctext" href="installation.html">Installation Guide</a></li><li><a class="toctext" href="quickstart.html">Quick Start Guide</a></li><li><a class="toctext" href="concepts.html">Concepts</a></li><li><a class="toctext" href="variables.html">Variables</a></li><li><a class="toctext" href="expressions.html">Expressions</a></li><li><a class="toctext" href="constraints.html">Constraints</a></li><li><a class="toctext" href="containers.html">Containers</a></li><li><a class="toctext" href="names.html">Names</a></li><li><a class="toctext" href="solvers.html">Solvers</a></li><li><a class="toctext" href="nlp.html">Nonlinear Modeling</a></li><li class="current"><a class="toctext" href="style.html">Style Guide</a><ul class="internal"><li><a class="toctext" href="#Style-guide-1">Style guide</a></li><li><a class="toctext" href="#Design-principles-1">Design principles</a></li></ul></li><li><a class="toctext" href="extensions.html">Extensions</a></li><li><a class="toctext" href="updating.html">Updating Guide</a></li><li><a class="toctext" href="howdoi.html">How do I ...? (FAQ)</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href="style.html">Style Guide</a></li></ul><a class="edit-page" href="https://github.com/JuliaOpt/JuMP.jl/blob/master/docs/src/style.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Style Guide</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Style-guide-and-design-principles-1" href="#Style-guide-and-design-principles-1">Style guide and design principles</a></h1><h2><a class="nav-anchor" id="Style-guide-1" href="#Style-guide-1">Style guide</a></h2><p>This section describes the coding style rules that apply to JuMP code and that we recommend for JuMP models and surrounding Julia code. The motivations for a style guide include:</p><ul><li><p>conveying best practices for writing readable and maintainable code</p></li><li><p>reducing the amount of time spent on <a href="https://en.wikipedia.org/wiki/Law_of_triviality">bike-shedding</a> by establishing basic naming and formatting conventions</p></li><li><p>lowering the barrier for new contributors by codifying the existing practices (e.g., you can be more confident your code will pass review if you follow the style guide)</p></li></ul><p>In some cases, the JuMP style guide diverges from the <a href="https://docs.julialang.org/en/v1.0.0/manual/style-guide/">Julia style guide</a>. All such cases will be explicitly noted and justified.</p><p>The JuMP style guide adopts many recommendations from the <a href="https://github.com/google/styleguide">Google style guides</a>.</p><div class="admonition info"><div class="admonition-title">Info</div><div class="admonition-text"><p>The style guide is always a work in progress, and not all JuMP code follows the rules. When modifying JuMP, please fix the style violations of the surrounding code (i.e., leave the code tidier than when you started). If large changes are needed, consider separating them into another PR.</p></div></div><h3><a class="nav-anchor" id="Formatting-1" href="#Formatting-1">Formatting</a></h3><p>Julia unfortunately does not have an autoformatting tool like <a href="https://blog.golang.org/go-fmt-your-code">gofmt</a>. Until a reliable autoformatting tool is available, we adopt the following conventions.</p><h4><a class="nav-anchor" id="Whitespace-1" href="#Whitespace-1">Whitespace</a></h4><p>Julia is mostly insensitive to whitespace characters within lines. For consistency:</p><ul><li><p>Use spaces between binary operators</p></li><li><p>Use a single space after commas and semicolons</p></li><li><p>Do not use extra spaces for unary operators, parentheses, or braces</p></li><li><p>Indent within new blocks (except <code>module</code>) using 4 spaces</p></li></ul><p>Good:</p><pre><code class="language-julia">f(x, y) = [3 * dot(x, y); x&#39;]</code></pre><p>Bad:</p><pre><code class="language-julia">f(x,y) = [ 3*dot(x,y) ; x&#39; ]</code></pre><p>Good:</p><pre><code class="language-julia">module Foo

function f(x)
    return x + 1
end

end # module Foo</code></pre><h4><a class="nav-anchor" id="TODO:-Line-breaks-1" href="#TODO:-Line-breaks-1">TODO: Line breaks</a></h4><h3><a class="nav-anchor" id="Syntax-1" href="#Syntax-1">Syntax</a></h3><p>Julia sometimes provides equivalent syntax to express the same basic operation. We discuss these cases below.</p><h4><a class="nav-anchor" id="for-loops-1" href="#for-loops-1"><code>for</code> loops</a></h4><p>Julia allows both <code>for x = 1:N</code> and <code>for x in 1:N</code>. Always prefer to use <code>in</code> over <code>=</code>, because <code>in</code> generalizes better to other index sets like <code>for x in eachindex(A)</code>.</p><h4><a class="nav-anchor" id="Empty-vectors-1" href="#Empty-vectors-1">Empty vectors</a></h4><p>For a type <code>T</code>, <code>T[]</code> and <code>Vector{T}()</code> are equivalent ways to create an empty vector with element type <code>T</code>. Prefer <code>T[]</code> because it is more concise.</p><h4><a class="nav-anchor" id="Trailing-periods-in-floating-point-constants-1" href="#Trailing-periods-in-floating-point-constants-1">Trailing periods in floating-point constants</a></h4><p>Both <code>1.0</code> and <code>1.</code> create a <code>Float64</code> with value <code>1.0</code>. Prefer <code>1.0</code> over <code>1.</code> because it is more easily distinguished from the integer constant <code>1</code>.</p><h3><a class="nav-anchor" id="Naming-1" href="#Naming-1">Naming</a></h3><pre><code class="language-julia">module SomeModule end
function some_function end
const SOME_CONSTANT = ...
struct SomeStruct end
some_local_variable = ...</code></pre><h4><a class="nav-anchor" id="Use-of-underscores-1" href="#Use-of-underscores-1">Use of underscores</a></h4><p>The Julia style guide recommends avoiding underscores &quot;when readable&quot;, for example, <code>haskey</code>, <code>isequal</code>, <code>remotecall</code>, and <code>remotecall_fetch</code>. This convention creates the potential for unnecessary bikeshedding and also forces the user to recall the presence/absence of an underscore, e.g., &quot;was that argument named <code>basename</code> or <code>base_name</code>?&quot;. For consistency, <em>always use underscores</em> in variable names and function names to separate words.</p><h4><a class="nav-anchor" id="Use-of-!-1" href="#Use-of-!-1">Use of <code>!</code></a></h4><p>Julia has a convention of appending <code>!</code> to a function name if the function modifies its arguments. We recommend to:</p><ul><li><p>Omit <code>!</code> when the name itself makes it clear that modification is taking place, e.g., <code>add_constraint</code> and <code>set_name</code>. We depart from the Julia style guide because <code>!</code> does not provide a reader with any additional information in this case, and adherence to this convention is not uniform even in base Julia itself (consider <code>Base.println</code>).</p></li><li><p>Use <code>!</code> in all other cases. In particular it can be used to distinguish between modifying and non-modifying variants of the same function like <code>scale</code> and <code>scale!</code>.</p></li></ul><p>Note that <code>!</code> is <em>not</em> a self-documenting feature because it is still ambiguous which arguments are modified when multiple arguments are present. Be sure to document which arguments are modified in the method&#39;s docstring.</p><p>See also the Julia style guide recommendations for <a href="https://docs.julialang.org/en/v1.0.0/manual/style-guide/#Write-functions-with-argument-ordering-similar-to-Julia&#39;s-Base-1">ordering of function arguments</a>.</p><h4><a class="nav-anchor" id="Abbreviations-1" href="#Abbreviations-1">Abbreviations</a></h4><p>Abbreviate names to make the code more readable, not to save typing. Don&#39;t arbitrarily delete letters from a word to abbreviate it (e.g., <code>indx</code>). Use abbreviations consistently within a body of code (e.g., do not mix <code>con</code> and <code>constr</code>, <code>idx</code> and <code>indx</code>).</p><p>Common abbreviations:</p><ul><li><p><code>num</code> for <code>number</code></p></li></ul><p>TODO: add more</p><h3><a class="nav-anchor" id="Miscellaneous-1" href="#Miscellaneous-1">Miscellaneous</a></h3><p>(TODO: Rethink categories.)</p><h4><a class="nav-anchor" id="User-facing-MethodError-1" href="#User-facing-MethodError-1">User-facing <code>MethodError</code></a></h4><p>Specifying argument types for methods is mostly optional in Julia, which means that it&#39;s possible to find out that you are working with unexpected types deep in the call chain. Avoid this situation or handle it with a helpful error message. <em>A user should see a <code>MethodError</code> only for methods that they called directly.</em></p><p>Bad:</p><pre><code class="language-julia">internal_function(x::Integer) = x + 1
# The user sees a MethodError for internal_function when calling
# public_function(&quot;a string&quot;). This is not very helpful.
public_function(x) = internal_function(x)</code></pre><p>Good:</p><pre><code class="language-julia">internal_function(x::Integer) = x + 1
# The user sees a MethodError for public_function when calling
# public_function(&quot;a string&quot;). This is easy to understand.
public_function(x::Integer) = internal_function(x)</code></pre><p>If it is hard to provide an error message at the top of the call chain, then the following pattern is also ok:</p><pre><code class="language-julia">internal_function(x::Integer) = x + 1
function internal_function(x)
    error(&quot;Internal error. This probably means that you called &quot; *
          &quot;public_function() with the wrong type.&quot;)
end
public_function(x) = internal_function(x)</code></pre><h2><a class="nav-anchor" id="Design-principles-1" href="#Design-principles-1">Design principles</a></h2><p>TODO: How to structure and test large JuMP models, libraries that use JuMP.</p><p>For how to write a solver, see MOI.</p><footer><hr/><a class="previous" href="nlp.html"><span class="direction">Previous</span><span class="title">Nonlinear Modeling</span></a><a class="next" href="extensions.html"><span class="direction">Next</span><span class="title">Extensions</span></a></footer></article></body></html>
