

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Problem Modification &mdash; JuMP -- Julia for Mathematical Programming 0.12 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="JuMP -- Julia for Mathematical Programming 0.12 documentation" href="index.html"/>
        <link rel="next" title="Solver Callbacks" href="callbacks.html"/>
        <link rel="prev" title="Expressions and Constraints" href="refexpr.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        

        
          <a href="index.html" class="icon icon-home"> JuMP -- Julia for Mathematical Programming
        

        
        </a>

        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="installation.html#getting-julia">Getting Julia</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#getting-jump">Getting JuMP</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#getting-solvers">Getting Solvers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="installation.html#coin-or-clp-and-cbc">COIN-OR Clp and Cbc</a></li>
<li class="toctree-l3"><a class="reference internal" href="installation.html#id3">CPLEX</a></li>
<li class="toctree-l3"><a class="reference internal" href="installation.html#id5">ECOS</a></li>
<li class="toctree-l3"><a class="reference internal" href="installation.html#id6">GLPK</a></li>
<li class="toctree-l3"><a class="reference internal" href="installation.html#id7">Gurobi</a></li>
<li class="toctree-l3"><a class="reference internal" href="installation.html#id8">Ipopt</a></li>
<li class="toctree-l3"><a class="reference internal" href="installation.html#id9">KNITRO</a></li>
<li class="toctree-l3"><a class="reference internal" href="installation.html#id10">MOSEK</a></li>
<li class="toctree-l3"><a class="reference internal" href="installation.html#id11">NLopt</a></li>
<li class="toctree-l3"><a class="reference internal" href="installation.html#id12">SCS</a></li>
<li class="toctree-l3"><a class="reference internal" href="installation.html#coin-or-bonmin-and-couenne">COIN-OR Bonmin and Couenne</a></li>
<li class="toctree-l3"><a class="reference internal" href="installation.html#other-ampl-compatible-solvers">Other AMPL-compatible solvers</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quick Start Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#creating-a-model">Creating a Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#defining-variables">Defining Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#objective-and-constraints">Objective and Constraints</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#simple-example">Simple Example</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="refmodel.html">Models</a><ul>
<li class="toctree-l2"><a class="reference internal" href="refmodel.html#constructor">Constructor</a></li>
<li class="toctree-l2"><a class="reference internal" href="refmodel.html#methods">Methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="refmodel.html#solve-status">Solve status</a></li>
<li class="toctree-l2"><a class="reference internal" href="refmodel.html#quadratic-objectives">Quadratic Objectives</a></li>
<li class="toctree-l2"><a class="reference internal" href="refmodel.html#second-order-cone-constraints">Second-order cone constraints</a></li>
<li class="toctree-l2"><a class="reference internal" href="refmodel.html#accessing-the-low-level-model">Accessing the low-level model</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="refvariable.html">Variables</a><ul>
<li class="toctree-l2"><a class="reference internal" href="refvariable.html#constructors">Constructors</a></li>
<li class="toctree-l2"><a class="reference internal" href="refvariable.html#semidefinite-and-symmetric-variables">Semidefinite and symmetric variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="refvariable.html#methods">Methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="refvariable.html#fixed-variables">Fixed variables</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="refexpr.html">Expressions and Constraints</a><ul>
<li class="toctree-l2"><a class="reference internal" href="refexpr.html#constructor">Constructor</a></li>
<li class="toctree-l2"><a class="reference internal" href="refexpr.html#methods">Methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="refexpr.html#constraint-references">Constraint References</a></li>
<li class="toctree-l2"><a class="reference internal" href="refexpr.html#conic-constraint-duals">Conic constraint duals</a></li>
<li class="toctree-l2"><a class="reference internal" href="refexpr.html#vectorized-operations">Vectorized operations</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Problem Modification</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#differences-in-solvers">Differences in Solvers</a></li>
<li class="toctree-l2"><a class="reference internal" href="#modifying-variables">Modifying variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="#modifying-constraints">Modifying constraints</a></li>
<li class="toctree-l2"><a class="reference internal" href="#modifying-the-objective">Modifying the objective</a></li>
<li class="toctree-l2"><a class="reference internal" href="#modifying-nonlinear-models">Modifying nonlinear models</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="callbacks.html">Solver Callbacks</a><ul>
<li class="toctree-l2"><a class="reference internal" href="callbacks.html#lazy-constraints">Lazy Constraints</a></li>
<li class="toctree-l2"><a class="reference internal" href="callbacks.html#user-cuts">User Cuts</a></li>
<li class="toctree-l2"><a class="reference internal" href="callbacks.html#user-heuristics">User Heuristics</a></li>
<li class="toctree-l2"><a class="reference internal" href="callbacks.html#querying-solver-progress">Querying Solver Progress</a></li>
<li class="toctree-l2"><a class="reference internal" href="callbacks.html#informational-callbacks">Informational Callbacks</a></li>
<li class="toctree-l2"><a class="reference internal" href="callbacks.html#code-design-considerations">Code Design Considerations</a></li>
<li class="toctree-l2"><a class="reference internal" href="callbacks.html#exiting-a-callback-early">Exiting a callback early</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="nlp.html">Nonlinear Modeling</a><ul>
<li class="toctree-l2"><a class="reference internal" href="nlp.html#syntax-notes">Syntax notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="nlp.html#nonlinear-parameters">Nonlinear Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="nlp.html#user-defined-functions">User-defined functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="nlp.html#factors-affecting-solution-time">Factors affecting solution time</a></li>
<li class="toctree-l2"><a class="reference internal" href="nlp.html#querying-derivatives-from-a-jump-model">Querying derivatives from a JuMP model</a></li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">JuMP -- Julia for Mathematical Programming</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Problem Modification</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/probmod.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="problem-modification">
<span id="probmod"></span><h1>Problem Modification<a class="headerlink" href="#problem-modification" title="Permalink to this headline">¶</a></h1>
<p>It can be useful to modify models after they have been created and solved, for
example when we are solving many similar models in succession or generating the
model dynamically (e.g. column generation). Additionally it is sometimes
desirable for the solver to re-start from the last solution to reduce running
times for successive solves (&#8220;hot-start&#8221;). Where available, JuMP exposes this
functionality.</p>
<div class="section" id="differences-in-solvers">
<h2>Differences in Solvers<a class="headerlink" href="#differences-in-solvers" title="Permalink to this headline">¶</a></h2>
<p>Some solvers do not expose the ability to modify a model after creation - the
model must be constructed from scratch each time. JuMP will use the ability to
modify problems exposed by the solver if possible, and will still work even if
the solver does not support this functionality by passing the complete problem
to the solver every time.</p>
</div>
<div class="section" id="modifying-variables">
<h2>Modifying variables<a class="headerlink" href="#modifying-variables" title="Permalink to this headline">¶</a></h2>
<p>As before, variables can be added using the <code class="docutils literal"><span class="pre">&#64;defVar</span></code> macro. To remove a variable,
one can set the bounds on that variable to zero, e.g.:</p>
<div class="highlight-julia"><div class="highlight"><pre><span class="n">setLower</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
<span class="n">setUpper</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
</pre></div>
</div>
<p>While bound updates are applied immediately in JuMP, variable bound changes are not
transmitted to the solver until <code class="docutils literal"><span class="pre">solve</span></code> is called again.</p>
<p>To add variables that appear in existing constraints, e.g. in column generation,
there is an alternative form of the <code class="docutils literal"><span class="pre">defVar</span></code> macro:</p>
<div class="highlight-julia"><div class="highlight"><pre><span class="p">@</span><span class="n">defVar</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">objective</span> <span class="o">=</span> <span class="n">objcoef</span><span class="p">,</span> <span class="n">inconstraints</span> <span class="o">=</span> <span class="n">constrrefs</span><span class="p">,</span> <span class="n">coefficients</span> <span class="o">=</span> <span class="n">values</span><span class="p">)</span>
<span class="p">@</span><span class="n">defVar</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">x</span> <span class="o">&gt;=</span> <span class="n">lb</span><span class="p">,</span> <span class="n">objective</span> <span class="o">=</span> <span class="n">objcoef</span><span class="p">,</span> <span class="n">inconstraints</span> <span class="o">=</span> <span class="n">constrrefs</span><span class="p">,</span> <span class="n">coefficients</span> <span class="o">=</span> <span class="n">values</span><span class="p">)</span>
<span class="p">@</span><span class="n">defVar</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">x</span> <span class="o">&lt;=</span> <span class="n">ub</span><span class="p">,</span> <span class="n">objective</span> <span class="o">=</span> <span class="n">objcoef</span><span class="p">,</span> <span class="n">inconstraints</span> <span class="o">=</span> <span class="n">constrrefs</span><span class="p">,</span> <span class="n">coefficients</span> <span class="o">=</span> <span class="n">values</span><span class="p">)</span>
<span class="p">@</span><span class="n">defVar</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">lb</span> <span class="o">&lt;=</span> <span class="n">x</span> <span class="o">&lt;=</span> <span class="n">ub</span><span class="p">,</span> <span class="n">objective</span> <span class="o">=</span> <span class="n">objcoef</span><span class="p">,</span> <span class="n">inconstraints</span> <span class="o">=</span> <span class="n">constrrefs</span><span class="p">,</span> <span class="n">coefficients</span> <span class="o">=</span> <span class="n">values</span><span class="p">)</span>
<span class="p">@</span><span class="n">defVar</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">lb</span> <span class="o">&lt;=</span> <span class="n">x</span> <span class="o">&lt;=</span> <span class="n">ub</span><span class="p">,</span> <span class="kt">Int</span><span class="p">,</span> <span class="n">objective</span> <span class="o">=</span> <span class="n">objcoef</span><span class="p">,</span> <span class="n">inconstraints</span> <span class="o">=</span> <span class="n">constrrefs</span><span class="p">,</span> <span class="n">coefficients</span> <span class="o">=</span> <span class="n">values</span><span class="p">)</span>  <span class="c"># Types are supported</span>
</pre></div>
</div>
<p>where <code class="docutils literal"><span class="pre">objcoef</span></code> is the coefficient of the variable in the new problem,
<code class="docutils literal"><span class="pre">constrrefs</span></code> is a vector of <code class="docutils literal"><span class="pre">ConstraintRef</span></code>, and <code class="docutils literal"><span class="pre">values</span></code> is a vector
of numbers. To give an example, consider the following code snippet:</p>
<div class="highlight-julia"><div class="highlight"><pre><span class="n">m</span> <span class="o">=</span> <span class="n">Model</span><span class="p">()</span>
<span class="p">@</span><span class="n">defVar</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">x</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">)</span>
<span class="p">@</span><span class="n">defVar</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">y</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">)</span>
<span class="p">@</span><span class="n">setObjective</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">Max</span><span class="p">,</span> <span class="mi">5</span><span class="n">x</span> <span class="o">+</span> <span class="mi">1</span><span class="n">y</span><span class="p">)</span>
<span class="p">@</span><span class="n">addConstraint</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">con</span><span class="p">,</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">solve</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>  <span class="c"># x = 1, y = 0</span>
<span class="p">@</span><span class="n">defVar</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">z</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">objective</span> <span class="o">=</span> <span class="mf">10.0</span><span class="p">,</span> <span class="n">inconstraints</span> <span class="o">=</span> <span class="p">[</span><span class="n">con</span><span class="p">],</span> <span class="n">coefficients</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">])</span>
<span class="c"># The constraint is now x + y + z &lt;= 1</span>
<span class="c"># The objective is now 5x + 1y + 10z</span>
<span class="n">solve</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>  <span class="c"># z = 1</span>
</pre></div>
</div>
<p>In some situations you may be adding all variables in this way. To do so, first
define a set of empty constraints, e.g.</p>
<div class="highlight-julia"><div class="highlight"><pre><span class="n">m</span> <span class="o">=</span> <span class="n">Model</span><span class="p">()</span>
<span class="p">@</span><span class="n">addConstraint</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">con</span><span class="p">,</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">)</span>
<span class="p">@</span><span class="n">setObjective</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">Max</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="p">@</span><span class="n">defVar</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">x</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">objective</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span> <span class="n">inconstraints</span> <span class="o">=</span> <span class="p">[</span><span class="n">con</span><span class="p">],</span> <span class="n">coefficients</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">])</span>
<span class="p">@</span><span class="n">defVar</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">y</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">objective</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">inconstraints</span> <span class="o">=</span> <span class="p">[</span><span class="n">con</span><span class="p">],</span> <span class="n">coefficients</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">])</span>
<span class="p">@</span><span class="n">defVar</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">z</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">objective</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">inconstraints</span> <span class="o">=</span> <span class="p">[</span><span class="n">con</span><span class="p">],</span> <span class="n">coefficients</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">])</span>
<span class="n">solve</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="modifying-constraints">
<h2>Modifying constraints<a class="headerlink" href="#modifying-constraints" title="Permalink to this headline">¶</a></h2>
<p>JuMP does not currently support changing constraint coefficients. For less-than
and greater-than constraints, the right-hand-side can be changed, e.g.:</p>
<div class="highlight-julia"><div class="highlight"><pre><span class="p">@</span><span class="n">addConstraint</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">mycon</span><span class="p">,</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="o">&lt;=</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">solve</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="n">chgConstrRHS</span><span class="p">(</span><span class="n">mycon</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>  <span class="c"># Now x + y &lt;= 3</span>
<span class="n">solve</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>  <span class="c"># Hot-start for LPs</span>
</pre></div>
</div>
</div>
<div class="section" id="modifying-the-objective">
<h2>Modifying the objective<a class="headerlink" href="#modifying-the-objective" title="Permalink to this headline">¶</a></h2>
<p>To change the objective, simply call <code class="docutils literal"><span class="pre">&#64;setObjective</span></code> again - the previous objective
function and sense will be replaced.</p>
</div>
<div class="section" id="modifying-nonlinear-models">
<h2>Modifying nonlinear models<a class="headerlink" href="#modifying-nonlinear-models" title="Permalink to this headline">¶</a></h2>
<p>See <a class="reference internal" href="nlp.html#nonlinearprobmod"><span>nonlinear parameters</span></a>.</p>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="callbacks.html" class="btn btn-neutral float-right" title="Solver Callbacks" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="refexpr.html" class="btn btn-neutral" title="Expressions and Constraints" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Miles Lubin, Iain Dunning, and Joey Huchette.
    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.12',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>