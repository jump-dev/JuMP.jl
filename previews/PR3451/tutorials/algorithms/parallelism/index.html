<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Parallelism · JuMP</title><meta name="title" content="Parallelism · JuMP"/><meta property="og:title" content="Parallelism · JuMP"/><meta property="twitter:title" content="Parallelism · JuMP"/><meta name="description" content="Documentation for JuMP."/><meta property="og:description" content="Documentation for JuMP."/><meta property="twitter:description" content="Documentation for JuMP."/><script async src="https://www.googletagmanager.com/gtag/js?id=G-0RZ8X3D3D0"></script><script>  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-0RZ8X3D3D0', {'page_path': location.pathname + location.search + location.hash});
</script><script data-outdated-warner src="../../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../../assets/documenter.js"></script><script src="../../../search_index.js"></script><script src="../../../siteinfo.js"></script><script src="../../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../../assets/themeswap.js"></script><link href="../../../assets/extra_styles.css" rel="stylesheet" type="text/css"/><link href="../../../assets/citations.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../../"><img class="docs-light-only" src="../../../assets/logo.svg" alt="JuMP logo"/><img class="docs-dark-only" src="../../../assets/logo-dark.svg" alt="JuMP logo"/></a><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><input class="collapse-toggle" id="menuitem-1" type="checkbox"/><label class="tocitem" for="menuitem-1"><span class="docs-label">Introduction</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../">Introduction</a></li><li><a class="tocitem" href="../../../should_i_use/">Should you use JuMP?</a></li><li><a class="tocitem" href="../../../installation/">Installation Guide</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2" type="checkbox" checked/><label class="tocitem" for="menuitem-2"><span class="docs-label">Tutorials</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><input class="collapse-toggle" id="menuitem-2-1" type="checkbox"/><label class="tocitem" for="menuitem-2-1"><span class="docs-label">Getting started</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../getting_started/introduction/">Introduction</a></li><li><a class="tocitem" href="../../getting_started/getting_started_with_julia/">Getting started with Julia</a></li><li><a class="tocitem" href="../../getting_started/getting_started_with_JuMP/">Getting started with JuMP</a></li><li><a class="tocitem" href="../../getting_started/getting_started_with_sets_and_indexing/">Getting started with sets and indexing</a></li><li><a class="tocitem" href="../../getting_started/getting_started_with_data_and_plotting/">Getting started with data and plotting</a></li><li><a class="tocitem" href="../../getting_started/debugging/">Debugging</a></li><li><a class="tocitem" href="../../getting_started/tolerances/">Tolerances and numerical issues</a></li><li><a class="tocitem" href="../../getting_started/design_patterns_for_larger_models/">Design patterns for larger models</a></li><li><a class="tocitem" href="../../getting_started/performance_tips/">Performance tips</a></li><li><a class="tocitem" href="../../getting_started/sum_if/">Performance problems with sum-if formulations</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-2" type="checkbox"/><label class="tocitem" for="menuitem-2-2"><span class="docs-label">Transitioning</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../transitioning/transitioning_from_matlab/">Transitioning from MATLAB</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-3" type="checkbox"/><label class="tocitem" for="menuitem-2-3"><span class="docs-label">Linear programs</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../linear/introduction/">Introduction</a></li><li><a class="tocitem" href="../../linear/knapsack/">The knapsack problem example</a></li><li><a class="tocitem" href="../../linear/diet/">The diet problem</a></li><li><a class="tocitem" href="../../linear/cannery/">The cannery problem</a></li><li><a class="tocitem" href="../../linear/typed_indices/">Strategies for dealing with many indices</a></li><li><a class="tocitem" href="../../linear/factory_schedule/">The factory schedule example</a></li><li><a class="tocitem" href="../../linear/multi/">The multi-commodity flow problem</a></li><li><a class="tocitem" href="../../linear/multi_commodity_network/">The network multi-commodity flow problem</a></li><li><a class="tocitem" href="../../linear/tips_and_tricks/">Tips and tricks</a></li><li><a class="tocitem" href="../../linear/piecewise_linear/">Approximating nonlinear functions</a></li><li><a class="tocitem" href="../../linear/facility_location/">The facility location problem</a></li><li><a class="tocitem" href="../../linear/finance/">Financial modeling problems</a></li><li><a class="tocitem" href="../../linear/geographic_clustering/">Geographical clustering</a></li><li><a class="tocitem" href="../../linear/network_flows/">Network flow problems</a></li><li><a class="tocitem" href="../../linear/transp/">The transportation problem</a></li><li><a class="tocitem" href="../../linear/multi_objective_examples/">Simple multi-objective examples</a></li><li><a class="tocitem" href="../../linear/multi_objective_knapsack/">Multi-objective knapsack</a></li><li><a class="tocitem" href="../../linear/multi_objective_project_planning/">Multi-objective project planning</a></li><li><a class="tocitem" href="../../linear/sudoku/">Sudoku</a></li><li><a class="tocitem" href="../../linear/n-queens/">N-Queens</a></li><li><a class="tocitem" href="../../linear/constraint_programming/">Constraint programming</a></li><li><a class="tocitem" href="../../linear/callbacks/">Callbacks</a></li><li><a class="tocitem" href="../../linear/lp_sensitivity/">Sensitivity analysis of a linear program</a></li><li><a class="tocitem" href="../../linear/basis/">Basis matrices</a></li><li><a class="tocitem" href="../../linear/mip_duality/">Computing the duals of a mixed-integer program</a></li><li><a class="tocitem" href="../../linear/multiple_solutions/">Finding multiple feasible solutions</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-4" type="checkbox"/><label class="tocitem" for="menuitem-2-4"><span class="docs-label">Nonlinear programs</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../nonlinear/introduction/">Introduction</a></li><li><a class="tocitem" href="../../nonlinear/simple_examples/">Simple examples</a></li><li><a class="tocitem" href="../../nonlinear/tips_and_tricks/">User-defined operators with vector outputs</a></li><li><a class="tocitem" href="../../nonlinear/operator_ad/">Automatic differentiation of user-defined operators</a></li><li><a class="tocitem" href="../../nonlinear/user_defined_hessians/">User-defined Hessians</a></li><li><a class="tocitem" href="../../nonlinear/nested_problems/">Nested optimization problems</a></li><li><a class="tocitem" href="../../nonlinear/querying_hessians/">Computing Hessians</a></li><li><a class="tocitem" href="../../nonlinear/complementarity/">Example: mixed complementarity problems</a></li><li><a class="tocitem" href="../../nonlinear/classifiers/">Example: classification problems</a></li><li><a class="tocitem" href="../../nonlinear/portfolio/">Example: portfolio optimization</a></li><li><a class="tocitem" href="../../nonlinear/rocket_control/">Example: nonlinear optimal control of a rocket</a></li><li><a class="tocitem" href="../../nonlinear/space_shuttle_reentry_trajectory/">Example: optimal control for a Space Shuttle reentry trajectory</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-5" type="checkbox"/><label class="tocitem" for="menuitem-2-5"><span class="docs-label">Conic programs</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../conic/introduction/">Introduction</a></li><li><a class="tocitem" href="../../conic/tips_and_tricks/">Modeling with cones</a></li><li><a class="tocitem" href="../../conic/dualization/">Dualization</a></li><li><a class="tocitem" href="../../conic/arbitrary_precision/">Arbitrary precision arithmetic</a></li><li><a class="tocitem" href="../../conic/start_values/">Primal and dual warm-starts</a></li><li><a class="tocitem" href="../../conic/simple_examples/">Simple semidefinite programming examples</a></li><li><a class="tocitem" href="../../conic/chordal_decomposition/">Chordal decomposition</a></li><li><a class="tocitem" href="../../conic/logistic_regression/">Example: logistic regression</a></li><li><a class="tocitem" href="../../conic/experiment_design/">Example: experiment design</a></li><li><a class="tocitem" href="../../conic/min_ellipse/">Example: minimal ellipses</a></li><li><a class="tocitem" href="../../conic/ellipse_approx/">Example: ellipsoid approximation</a></li><li><a class="tocitem" href="../../conic/ellipse_fitting/">Example: fitting of circles and ellipses</a></li><li><a class="tocitem" href="../../conic/quantum_discrimination/">Example: quantum state discrimination</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-6" type="checkbox" checked/><label class="tocitem" for="menuitem-2-6"><span class="docs-label">Algorithms</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../benders_decomposition/">Benders decomposition</a></li><li><a class="tocitem" href="../cutting_stock_column_generation/">Column generation</a></li><li><a class="tocitem" href="../tsp_lazy_constraints/">Traveling Salesperson Problem</a></li><li><a class="tocitem" href="../rolling_horizon/">Rolling horizon problems</a></li><li class="is-active"><a class="tocitem" href>Parallelism</a><ul class="internal"><li><a class="tocitem" href="#Overview"><span>Overview</span></a></li><li><a class="tocitem" href="#Multi-threading"><span>Multi-threading</span></a></li><li><a class="tocitem" href="#Distributed-computing"><span>Distributed computing</span></a></li><li><a class="tocitem" href="#Parallelism-within-the-solver"><span>Parallelism within the solver</span></a></li><li><a class="tocitem" href="#GPU-parallelism"><span>GPU parallelism</span></a></li></ul></li><li><a class="tocitem" href="../pdhg/">Writing a solver interface</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-7" type="checkbox"/><label class="tocitem" for="menuitem-2-7"><span class="docs-label">Applications</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../applications/power_systems/">Power Systems</a></li><li><a class="tocitem" href="../../applications/optimal_power_flow/">Optimal power flow</a></li><li><a class="tocitem" href="../../applications/web_app/">Serving web apps</a></li><li><a class="tocitem" href="../../applications/two_stage_stochastic/">Two-stage stochastic programs</a></li></ul></li></ul></li><li><input class="collapse-toggle" id="menuitem-3" type="checkbox"/><label class="tocitem" for="menuitem-3"><span class="docs-label">Manual</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../manual/models/">Models</a></li><li><a class="tocitem" href="../../../manual/variables/">Variables</a></li><li><a class="tocitem" href="../../../manual/constraints/">Constraints</a></li><li><a class="tocitem" href="../../../manual/expressions/">Expressions</a></li><li><a class="tocitem" href="../../../manual/objective/">Objectives</a></li><li><a class="tocitem" href="../../../manual/containers/">Containers</a></li><li><a class="tocitem" href="../../../manual/solutions/">Solutions</a></li><li><a class="tocitem" href="../../../manual/callbacks/">Solver-independent Callbacks</a></li><li><a class="tocitem" href="../../../manual/complex/">Complex number support</a></li><li><a class="tocitem" href="../../../manual/nonlinear/">Nonlinear Modeling</a></li><li><a class="tocitem" href="../../../manual/nlp/">Nonlinear Modeling (Legacy)</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4" type="checkbox"/><label class="tocitem" for="menuitem-4"><span class="docs-label">API Reference</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../api/JuMP/">JuMP</a></li><li><a class="tocitem" href="../../../api/JuMP.Containers/">JuMP.Containers</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5" type="checkbox"/><label class="tocitem" for="menuitem-5"><span class="docs-label">Background Information</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../background/algebraic_modeling_languages/">Algebraic modeling languages</a></li><li><a class="tocitem" href="../../../background/bibliography/">Bibliography</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-6" type="checkbox"/><label class="tocitem" for="menuitem-6"><span class="docs-label">Developer Docs</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../developers/contributing/">Contributing</a></li><li><a class="tocitem" href="../../../developers/extensions/">Extensions</a></li><li><a class="tocitem" href="../../../developers/custom_solver_binaries/">Custom binaries</a></li><li><a class="tocitem" href="../../../developers/style/">Style Guide</a></li><li><a class="tocitem" href="../../../developers/conventions/">Conventions</a></li><li><a class="tocitem" href="../../../developers/roadmap/">Roadmap</a></li><li><a class="tocitem" href="../../../developers/checklists/">Checklists</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-7" type="checkbox"/><label class="tocitem" for="menuitem-7"><span class="docs-label">Solvers</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../packages/solvers/">Introduction</a></li><li><a class="tocitem" href="../../../packages/AmplNLWriter/">jump-dev/AmplNLWriter.jl</a></li><li><a class="tocitem" href="../../../packages/BARON/">jump-dev/BARON.jl</a></li><li><a class="tocitem" href="../../../packages/CPLEX/">jump-dev/CPLEX.jl</a></li><li><a class="tocitem" href="../../../packages/CSDP/">jump-dev/CSDP.jl</a></li><li><a class="tocitem" href="../../../packages/Cbc/">jump-dev/Cbc.jl</a></li><li><a class="tocitem" href="../../../packages/Clp/">jump-dev/Clp.jl</a></li><li><a class="tocitem" href="../../../packages/Dualization/">jump-dev/Dualization.jl</a></li><li><a class="tocitem" href="../../../packages/ECOS/">jump-dev/ECOS.jl</a></li><li><a class="tocitem" href="../../../packages/GLPK/">jump-dev/GLPK.jl</a></li><li><a class="tocitem" href="../../../packages/Gurobi/">jump-dev/Gurobi.jl</a></li><li><a class="tocitem" href="../../../packages/HiGHS/">jump-dev/HiGHS.jl</a></li><li><a class="tocitem" href="../../../packages/Hypatia/">jump-dev/Hypatia.jl</a></li><li><a class="tocitem" href="../../../packages/Ipopt/">jump-dev/Ipopt.jl</a></li><li><a class="tocitem" href="../../../packages/KNITRO/">jump-dev/KNITRO.jl</a></li><li><a class="tocitem" href="../../../packages/MathOptAnalyzer/">jump-dev/MathOptAnalyzer.jl</a></li><li><a class="tocitem" href="../../../packages/MathOptIIS/">jump-dev/MathOptIIS.jl</a></li><li><a class="tocitem" href="../../../packages/MiniZinc/">jump-dev/MiniZinc.jl</a></li><li><a class="tocitem" href="../../../packages/MosekTools/">jump-dev/MosekTools.jl</a></li><li><a class="tocitem" href="../../../packages/MultiObjectiveAlgorithms/">jump-dev/MultiObjectiveAlgorithms.jl</a></li><li><a class="tocitem" href="../../../packages/NEOSServer/">jump-dev/NEOSServer.jl</a></li><li><a class="tocitem" href="../../../packages/NLopt/">jump-dev/NLopt.jl</a></li><li><a class="tocitem" href="../../../packages/Pajarito/">jump-dev/Pajarito.jl</a></li><li><a class="tocitem" href="../../../packages/Pavito/">jump-dev/Pavito.jl</a></li><li><a class="tocitem" href="../../../packages/SCS/">jump-dev/SCS.jl</a></li><li><a class="tocitem" href="../../../packages/SDPA/">jump-dev/SDPA.jl</a></li><li><a class="tocitem" href="../../../packages/SDPLR/">jump-dev/SDPLR.jl</a></li><li><a class="tocitem" href="../../../packages/SDPNAL/">jump-dev/SDPNAL.jl</a></li><li><a class="tocitem" href="../../../packages/SDPT3/">jump-dev/SDPT3.jl</a></li><li><a class="tocitem" href="../../../packages/SeDuMi/">jump-dev/SeDuMi.jl</a></li><li><a class="tocitem" href="../../../packages/Xpress/">jump-dev/Xpress.jl</a></li><li><a class="tocitem" href="../../../packages/cuOpt/">jump-dev/cuOpt.jl</a></li><li><a class="tocitem" href="../../../packages/COPT/">COPT-Public/COPT.jl</a></li><li><a class="tocitem" href="../../../packages/GAMS/">GAMS-dev/GAMS.jl</a></li><li><a class="tocitem" href="../../../packages/Manopt/">JuliaManifolds/Manopt.jl</a></li><li><a class="tocitem" href="../../../packages/Optim/">JuliaNLSolvers/Optim.jl</a></li><li><a class="tocitem" href="../../../packages/CDDLib/">JuliaPolyhedra/CDDLib.jl</a></li><li><a class="tocitem" href="../../../packages/Percival/">JuliaSmoothOptimizers/Percival.jl</a></li><li><a class="tocitem" href="../../../packages/MAiNGO/">MAiNGO-github/MAiNGO.jl</a></li><li><a class="tocitem" href="../../../packages/MadNLP/">MadNLP/MadNLP.jl</a></li><li><a class="tocitem" href="../../../packages/EAGO/">PSORLab/EAGO.jl</a></li><li><a class="tocitem" href="../../../packages/PATHSolver/">chkwon/PATHSolver.jl</a></li><li><a class="tocitem" href="../../../packages/Uno/">cvanaret/Uno</a></li><li><a class="tocitem" href="../../../packages/DAQP/">darnstrom/DAQP.jl</a></li><li><a class="tocitem" href="../../../packages/Tulip/">ds4dm/Tulip.jl</a></li><li><a class="tocitem" href="../../../packages/CATrustRegionMethod/">fadihamad94/CATrustRegionMethod.jl</a></li><li><a class="tocitem" href="../../../packages/Loraine/">kocvara/Loraine.jl</a></li><li><a class="tocitem" href="../../../packages/Alpine/">lanl-ansi/Alpine.jl</a></li><li><a class="tocitem" href="../../../packages/Juniper/">lanl-ansi/Juniper.jl</a></li><li><a class="tocitem" href="../../../packages/ProxSDP/">mariohsouto/ProxSDP.jl</a></li><li><a class="tocitem" href="../../../packages/OSQP/">osqp/OSQP.jl</a></li><li><a class="tocitem" href="../../../packages/CDCS/">oxfordcontrol/CDCS.jl</a></li><li><a class="tocitem" href="../../../packages/COSMO/">oxfordcontrol/COSMO.jl</a></li><li><a class="tocitem" href="../../../packages/Clarabel/">oxfordcontrol/Clarabel.jl</a></li><li><a class="tocitem" href="../../../packages/MathOptChordalDecomposition/">samuelsonric/MathOptChordalDecomposition.jl</a></li><li><a class="tocitem" href="../../../packages/SCIP/">scipopt/SCIP.jl</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-8" type="checkbox"/><label class="tocitem" for="menuitem-8"><span class="docs-label">Extensions</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../extensions/introduction/">Introduction</a></li><li><a class="tocitem" href="../../../packages/DiffOpt/">jump-dev/DiffOpt.jl</a></li><li><a class="tocitem" href="../../../packages/ParametricOptInterface/">jump-dev/ParametricOptInterface.jl</a></li><li><a class="tocitem" href="../../../packages/PiecewiseLinearOpt/">jump-dev/PiecewiseLinearOpt.jl</a></li><li><a class="tocitem" href="../../../packages/PolyJuMP/">jump-dev/PolyJuMP.jl</a></li><li><a class="tocitem" href="../../../packages/SumOfSquares/">jump-dev/SumOfSquares.jl</a></li><li><a class="tocitem" href="../../../packages/DisjunctiveProgramming/">hdavid16/DisjunctiveProgramming.jl</a></li><li><a class="tocitem" href="../../../packages/InfiniteOpt/">infiniteopt/InfiniteOpt.jl</a></li><li><a class="tocitem" href="../../../packages/BilevelJuMP/">joaquimg/BilevelJuMP.jl</a></li><li><a class="tocitem" href="../../../packages/MathOptAI/">lanl-ansi/MathOptAI.jl</a></li><li><a class="tocitem" href="../../../packages/MathOptSymbolicAD/">lanl-ansi/MathOptSymbolicAD.jl</a></li><li><a class="tocitem" href="../../../packages/SDDP/">odow/SDDP.jl</a></li><li><a class="tocitem" href="../../../packages/Plasmo/">plasmo-dev/Plasmo.jl</a></li><li><a class="tocitem" href="../../../extensions/DimensionalData/">rafaqz/DimensionalData.jl</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-9" type="checkbox"/><label class="tocitem" for="menuitem-9"><span class="docs-label">MathOptInterface</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><input class="collapse-toggle" id="menuitem-9-1" type="checkbox"/><label class="tocitem" for="menuitem-9-1"><span class="docs-label">Introduction</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../moi/">Introduction</a></li><li><a class="tocitem" href="../../../moi/background/motivation/">Motivation</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-9-2" type="checkbox"/><label class="tocitem" for="menuitem-9-2"><span class="docs-label">Tutorials</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../moi/tutorials/example/">Solving a problem using MathOptInterface</a></li><li><a class="tocitem" href="../../../moi/tutorials/implementing/">Implementing a solver interface</a></li><li><a class="tocitem" href="../../../moi/tutorials/mathprogbase/">Transitioning from MathProgBase</a></li><li><a class="tocitem" href="../../../moi/tutorials/bridging_constraint/">Implementing a constraint bridge</a></li><li><a class="tocitem" href="../../../moi/tutorials/manipulating_expressions/">Manipulating expressions</a></li><li><a class="tocitem" href="../../../moi/tutorials/latency/">Latency</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-9-3" type="checkbox"/><label class="tocitem" for="menuitem-9-3"><span class="docs-label">Manual</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../moi/manual/standard_form/">Standard form problem</a></li><li><a class="tocitem" href="../../../moi/manual/models/">Models</a></li><li><a class="tocitem" href="../../../moi/manual/variables/">Variables</a></li><li><a class="tocitem" href="../../../moi/manual/constraints/">Constraints</a></li><li><a class="tocitem" href="../../../moi/manual/solutions/">Solutions</a></li><li><a class="tocitem" href="../../../moi/manual/modification/">Problem modification</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-9-4" type="checkbox"/><label class="tocitem" for="menuitem-9-4"><span class="docs-label">Background</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../moi/background/duality/">Duality</a></li><li><a class="tocitem" href="../../../moi/background/infeasibility_certificates/">Infeasibility certificates</a></li><li><a class="tocitem" href="../../../moi/background/naming_conventions/">Naming conventions</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-9-5" type="checkbox"/><label class="tocitem" for="menuitem-9-5"><span class="docs-label">API Reference</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../moi/reference/standard_form/">Standard form</a></li><li><a class="tocitem" href="../../../moi/reference/models/">Models</a></li><li><a class="tocitem" href="../../../moi/reference/variables/">Variables</a></li><li><a class="tocitem" href="../../../moi/reference/constraints/">Constraints</a></li><li><a class="tocitem" href="../../../moi/reference/modification/">Modifications</a></li><li><a class="tocitem" href="../../../moi/reference/nonlinear/">Nonlinear programming</a></li><li><a class="tocitem" href="../../../moi/reference/callbacks/">Callbacks</a></li><li><a class="tocitem" href="../../../moi/reference/errors/">Errors</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-9-6" type="checkbox"/><label class="tocitem" for="menuitem-9-6"><span class="docs-label">Submodules</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><input class="collapse-toggle" id="menuitem-9-6-1" type="checkbox"/><label class="tocitem" for="menuitem-9-6-1"><span class="docs-label">Benchmarks</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../moi/submodules/Benchmarks/overview/">Overview</a></li><li><a class="tocitem" href="../../../moi/submodules/Benchmarks/reference/">API Reference</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-9-6-2" type="checkbox"/><label class="tocitem" for="menuitem-9-6-2"><span class="docs-label">Bridges</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../moi/submodules/Bridges/overview/">Overview</a></li><li><a class="tocitem" href="../../../moi/submodules/Bridges/implementation/">Implementation</a></li><li><a class="tocitem" href="../../../moi/submodules/Bridges/list_of_bridges/">List of bridges</a></li><li><a class="tocitem" href="../../../moi/submodules/Bridges/reference/">API Reference</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-9-6-3" type="checkbox"/><label class="tocitem" for="menuitem-9-6-3"><span class="docs-label">FileFormats</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../moi/submodules/FileFormats/overview/">Overview</a></li><li><a class="tocitem" href="../../../moi/submodules/FileFormats/reference/">API Reference</a></li><li><a class="tocitem" href="../../../moi/submodules/FileFormats/LP/">The LP file format</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-9-6-4" type="checkbox"/><label class="tocitem" for="menuitem-9-6-4"><span class="docs-label">Nonlinear</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../moi/submodules/Nonlinear/overview/">Overview</a></li><li><a class="tocitem" href="../../../moi/submodules/Nonlinear/SymbolicAD/">SymbolicAD</a></li><li><a class="tocitem" href="../../../moi/submodules/Nonlinear/reference/">API Reference</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-9-6-5" type="checkbox"/><label class="tocitem" for="menuitem-9-6-5"><span class="docs-label">Utilities</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../moi/submodules/Utilities/overview/">Overview</a></li><li><a class="tocitem" href="../../../moi/submodules/Utilities/reference/">API Reference</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-9-6-6" type="checkbox"/><label class="tocitem" for="menuitem-9-6-6"><span class="docs-label">Test</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../moi/submodules/Test/overview/">Overview</a></li><li><a class="tocitem" href="../../../moi/submodules/Test/reference/">API Reference</a></li></ul></li></ul></li><li><input class="collapse-toggle" id="menuitem-9-7" type="checkbox"/><label class="tocitem" for="menuitem-9-7"><span class="docs-label">Developer Docs</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../moi/developer/checklists/">Checklists</a></li><li><a class="tocitem" href="../../../moi/developer/contributing/">Contributing</a></li><li><a class="tocitem" href="../../../moi/developer/defining_a_new_set/">Defining a new set</a></li></ul></li><li><a class="tocitem" href="../../../moi/release_notes/">Release notes</a></li></ul></li><li><a class="tocitem" href="../../../release_notes/">Release notes</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Tutorials</a></li><li><a class="is-disabled">Algorithms</a></li><li class="is-active"><a href>Parallelism</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Parallelism</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/jump-dev/JuMP.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/jump-dev/JuMP.jl/blob/master/docs/src/tutorials/algorithms/parallelism.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Parallelism"><a class="docs-heading-anchor" href="#Parallelism">Parallelism</a><a id="Parallelism-1"></a><a class="docs-heading-anchor-permalink" href="#Parallelism" title="Permalink"></a></h1><p>The purpose of this tutorial is to give a brief overview of parallelism in Julia as it pertains to JuMP, and to explain some of the things to be aware of when writing parallel algorithms involving JuMP models.</p><h2 id="Overview"><a class="docs-heading-anchor" href="#Overview">Overview</a><a id="Overview-1"></a><a class="docs-heading-anchor-permalink" href="#Overview" title="Permalink"></a></h2><p>There are two main types of parallelism in Julia:</p><ol><li>Multi-threading</li><li>Distributed computing</li></ol><p>In multi-threading, multiple tasks are run in a single Julia process and share the same memory. In distributed computing, tasks are run in multiple Julia processes with independent memory spaces. This can include processes across multiple physical machines, such as in a high-performance computing cluster.</p><p>Choosing and understanding the type of parallelism you are using is important because the code you write for each type is different, and there are different limitations and benefits to each approach. However, the best choice is highly problem dependent, so you may want to experiment with both approaches to determine what works for your situation.</p><h2 id="Multi-threading"><a class="docs-heading-anchor" href="#Multi-threading">Multi-threading</a><a id="Multi-threading-1"></a><a class="docs-heading-anchor-permalink" href="#Multi-threading" title="Permalink"></a></h2><p>To use multi-threading with Julia, you must either start Julia with the command line flag <code>--threads=N</code>, or you must set the <code>JULIA_NUM_THREADS</code> environment variable before launching Julia. For this documentation, we set the environment variable to:</p><pre><code class="language-julia hljs">julia&gt; ENV[&quot;JULIA_NUM_THREADS&quot;]
&quot;4&quot;</code></pre><p>You can check how many threads are available using:</p><pre><code class="language-julia hljs">julia&gt; Threads.nthreads()
4</code></pre><p>The easiest way to use multi-threading in Julia is by placing the <code>Threads.@threads</code> macro in front of a <code>for</code>-loop:</p><pre><code class="language-julia hljs">julia&gt; @time begin
           ids = Int[]
           my_lock = Threads.ReentrantLock()
           Threads.@threads for i in 1:Threads.nthreads()
               global ids, my_lock
               Threads.lock(my_lock) do
                   push!(ids, Threads.threadid())
               end
               sleep(1.0)
           end
       end
  1.037087 seconds (31.32 k allocations: 1.836 MiB, 2.02% compilation time)</code></pre><p>This for-loop sleeps for <code>1</code> second on each iteration. Thus, if it had executed sequentially, it should have taken the same number of seconds as there are threads available. Instead, it took only 1 second, showing that the iterations were executed simultaneously. We can verify this by checking the <code>Threads.threadid()</code> of the thread that executed each iteration:</p><pre><code class="language-julia hljs">julia&gt; ids
4-element Vector{Int64}:
 2
 4
 1
 3</code></pre><div class="admonition is-danger" id="Danger-bfa223bc868772c0"><header class="admonition-header">Danger<a class="admonition-anchor" href="#Danger-bfa223bc868772c0" title="Permalink"></a></header><div class="admonition-body"><p>The <code>Threads.threadid()</code> that a task runs on may change during execution. Therefore, it is not safe to use <code>Threads.threadid()</code> to index into, say, a vector of buffer or stateful objects. As an example, do not do:</p><pre><code class="language-julia hljs">x = rand(Threads.nthreads())
Threads.@threads for i in 1:Threads.nthreads()
    x[Threads.threadid()] *= 2  # Danger! This use of threadid is not safe
end</code></pre><p>For more information, read <a href="https://julialang.org/blog/2023/07/PSA-dont-use-threadid/">PSA: thread-local state is no longer recommended</a>.</p></div></div><h3 id="Data-races"><a class="docs-heading-anchor" href="#Data-races">Data races</a><a id="Data-races-1"></a><a class="docs-heading-anchor-permalink" href="#Data-races" title="Permalink"></a></h3><p>When working with threads, you must avoid data races. A data race occurs when multiple threads access the same variable at the same time, at least one thread modifies the variable, and the order of the reads and writes are not properly coordinated.</p><p>Here&#39;s an example of a data race:</p><pre><code class="language-julia hljs">julia&gt; begin
           x = Ref(0)
           Threads.@threads for i in 1:Threads.nthreads()
                for i in 1:1_000
                    x[] += 1
                end
           end
           x[]
       end
1106</code></pre><p>The expected answer is <code>4_000</code> (because there are four threads each incrementing 1,000 times), but the actual result is much smaller. Moreover, the result is non-deterministic; if we re-ran this code, we would get a different value each time.</p><p>We got the wrong answer because multiple threads are reading and writing <code>x</code> at the same time without coordination. For example, the following sequence could occur:</p><ul><li>Assume <code>x[]</code> currently has a value of <code>3</code></li><li>Thread A reads <code>x[]</code> to get <code>3</code></li><li>Thread B reads <code>x[]</code> to get <code>3</code></li><li>Thread A writes <code>x[] = 3 + 1 = 4</code></li><li>Thread B writes <code>x[] = 3 + 1 = 4</code></li><li>The final value of <code>x[]</code> is <code>4</code></li></ul><p>The write from Thread A is overwritten, and so the value of <code>x[]</code> has increased by <code>1</code> instead of <code>2</code>.</p><p>Similar to the earlier <code>ids</code> example, we can fix this data race using a <code>ReentrantLock</code>. The lock ensures that only one thread can update (read and then write) <code>x</code> at a time. Now we get the correct answer:</p><pre><code class="language-julia hljs">julia&gt; begin
           x = Ref(0)
           l = ReentrantLock()
           Threads.@threads for i in 1:Threads.nthreads()
                for i in 1:1_000
                    lock(l) do
                        x[] += 1
                    end
                end
           end
           x[]
       end
4000</code></pre><p>With the lock, the sequence of events goes something like:</p><ul><li>Assume <code>x[]</code> currently has a value of <code>3</code></li><li>Thread A acquires the lock</li><li>Thread A reads <code>x[]</code> to get <code>3</code></li><li>Thread B asks for the lock, but is denied because A is currently using it</li><li>Thread A writes <code>x[] = 3 + 1 = 4</code></li><li>Thread A releases the lock</li><li>Thread B acquires the lock</li><li>Thread B reads <code>x[]</code> to get <code>4</code></li><li>Thread B writes <code>x[] = 4 + 1 = 5</code></li><li>Thread B releases the lock</li><li>The final value of <code>x[]</code> is <code>5</code></li></ul><p>See the <a href="https://docs.julialang.org/en/v1/manual/multi-threading/">Multi-threading</a> section of the Julia documentation for more details.</p><h3 id="JuMP-models-are-not-thread-safe"><a class="docs-heading-anchor" href="#JuMP-models-are-not-thread-safe">JuMP models are not thread-safe</a><a id="JuMP-models-are-not-thread-safe-1"></a><a class="docs-heading-anchor-permalink" href="#JuMP-models-are-not-thread-safe" title="Permalink"></a></h3><p>An object is thread-safe if it can be modified by separate threads without causing a data race. JuMP models are not thread-safe. Code that uses multi-threading to simultaneously modify or optimize a single JuMP model across threads may error, crash Julia, or silently produce incorrect results.</p><p>For example, the following incorrect use of multi-threading crashes Julia:</p><pre><code class="language-julia hljs">julia&gt; using JuMP, HiGHS

julia&gt; function an_incorrect_way_to_use_threading()
           model = Model(HiGHS.Optimizer)
           set_silent(model)
           @variable(model, x)
           Threads.@threads for i in 1:10
               optimize!(model)
           end
           return
       end
an_incorrect_way_to_use_threading (generic function with 1 method)

julia&gt; an_incorrect_way_to_use_threading()
julia(76918,0x16c92f000) malloc: *** error for object 0x600003e52220: pointer being freed was not allocated
zsh: abort      julia -t 4</code></pre><p>To avoid issues with thread safety, create a new instance of a JuMP model in each iteration of the for-loop. In addition, you must avoid race conditions in the rest of your Julia code, for example, by using a lock when pushing elements to a shared vector.</p><h3 id="Thread-safety-and-the-closure-capture-bug"><a class="docs-heading-anchor" href="#Thread-safety-and-the-closure-capture-bug">Thread safety and the closure capture bug</a><a id="Thread-safety-and-the-closure-capture-bug-1"></a><a class="docs-heading-anchor-permalink" href="#Thread-safety-and-the-closure-capture-bug" title="Permalink"></a></h3><div class="admonition is-danger" id="Danger-ba845e5731d163c7"><header class="admonition-header">Danger<a class="admonition-anchor" href="#Danger-ba845e5731d163c7" title="Permalink"></a></header><div class="admonition-body"><p>This section is very important to understand. It is not specific to JuMP and it applies to all multithreaded Julia programs.</p></div></div><p>There is an upstream design issue in Julia (<a href="https://github.com/JuliaLang/julia/issues/14948">julia#14948</a>) that can silently introduce race conditions to your code and violate thread safety.</p><p>You can trigger this bug if you have a local variable inside the <code>Threads.@threads</code> loop with the same name as a variable outside the loop. Here&#39;s an example:</p><pre><code class="language-julia hljs">julia&gt; using JuMP, HiGHS

julia&gt; function _create_model(j)
           model = Model(HiGHS.Optimizer)
           @variable(model, x[1:j])
           return model
       end
_create_model (generic function with 1 method)

julia&gt; function dont_run_segfault_likely()
           models = _create_model.(1:2)
           Threads.@threads for j in 1:2
               model = models[j]  # `model` is used inside the loop
               set_lower_bound.(model[:x], j)
               optimize!(model)
           end
           model = models[1]      # `model` is used outside the loop
       end
dont_run_segfault_likely (generic function with 1 method)</code></pre><p>This code is problematic for the following reason. Because <code>model</code> appears both inside <code>Threads.@threads</code> and outside, Julia&#39;s scoping rules treat it as a single variable. Therefore, instead of creating a different <code>model</code> for each thread, Julia creates a single mutable container called a <code>Core.Box</code> that is used to store the value of <code>model</code> throughout the life of the function. Now there is a race condition for reads and writes of <code>model</code>, and so a thread may read the value of <code>model</code> only to find that its <code>model</code> was overwritten with the value of <code>model</code> from another thread.</p><p>To diagnose this issue, use <code>@code_warntype</code>. If your code is problematic, you will see a local variable with the type <code>::Core.Box</code>:</p><pre><code class="language-julia hljs">julia&gt; @code_warntype dont_run_segfault_likely()
MethodInstance for dont_run_segfault_likely()
  from dont_run_segfault_likely() @ Main REPL[3]:1
Arguments
  ...
Locals
  ...
  model::Core.Box
  ...</code></pre><p>If you see <code>Core.Box</code>, you must refactor your code to avoid re-using the same variable name inside and outside the threading loop.</p><p>Alternatively, you can annotate the local variables inside the loop with <code>local</code> to disambiguate them from the variables outside the loop.</p><pre><code class="language-julia hljs">julia&gt; using JuMP, HiGHS

julia&gt; function _create_model(j)
           model = Model(HiGHS.Optimizer)
           @variable(model, x[1:j])
           return model
       end
_create_model (generic function with 1 method)

julia&gt; function safe_to_run()
           models = _create_model.(1:2)
           Threads.@threads for j in 1:2
               local model = models[j]  # annotated as `local`
               set_lower_bound.(model[:x], j)
               optimize!(model)
           end
           model = models[1]  # This `model` is not the inner `model`
       end
safe_to_run (generic function with 1 method)</code></pre><h3 id="Example:-parameter-search-with-multi-threading"><a class="docs-heading-anchor" href="#Example:-parameter-search-with-multi-threading">Example: parameter search with multi-threading</a><a id="Example:-parameter-search-with-multi-threading-1"></a><a class="docs-heading-anchor-permalink" href="#Example:-parameter-search-with-multi-threading" title="Permalink"></a></h3><p>Here is an example of how to use multi-threading to solve a collection of JuMP models in parallel.</p><pre><code class="language-julia hljs">julia&gt; using JuMP, HiGHS

julia&gt; function a_good_way_to_use_threading()
           solutions = Pair{Int,Float64}[]
           my_lock = Threads.ReentrantLock();
           Threads.@threads for i in 1:10
               model = Model(HiGHS.Optimizer)
               set_silent(model)
               set_attribute(model, MOI.NumberOfThreads(), 1)
               @variable(model, x &gt;= i)
               @objective(model, Min, x)
               optimize!(model)
               assert_is_solved_and_feasible(model)
               Threads.lock(my_lock) do
                   push!(solutions, i =&gt; objective_value(model))
               end
           end
           return solutions
       end
a_good_way_to_use_threading (generic function with 1 method)

julia&gt; a_good_way_to_use_threading()
10-element Vector{Pair{Int64, Float64}}:
  7 =&gt; 7.0
  9 =&gt; 9.0
  4 =&gt; 4.0
  1 =&gt; 1.0
  5 =&gt; 5.0
  2 =&gt; 2.0
  8 =&gt; 8.0
 10 =&gt; 10.0
  3 =&gt; 3.0
  6 =&gt; 6.0</code></pre><div class="admonition is-warning" id="Warning-75b0ebe238239fc"><header class="admonition-header">Warning<a class="admonition-anchor" href="#Warning-75b0ebe238239fc" title="Permalink"></a></header><div class="admonition-body"><p>For some solvers, it may be necessary to limit the number of threads used internally by the solver to 1 by setting the <a href="../../../moi/reference/models/#MathOptInterface.NumberOfThreads"><code>MOI.NumberOfThreads</code></a> attribute.</p></div></div><h3 id="Example:-building-data-structures-in-parallel"><a class="docs-heading-anchor" href="#Example:-building-data-structures-in-parallel">Example: building data structures in parallel</a><a id="Example:-building-data-structures-in-parallel-1"></a><a class="docs-heading-anchor-permalink" href="#Example:-building-data-structures-in-parallel" title="Permalink"></a></h3><p>For large problems, building the model in JuMP can be a bottleneck, and you may consider trying to write code that builds the model in parallel, for example, by wrapping a <code>for</code>-loop that adds constraints with <code>Threads.@threads</code>. Here&#39;s an example:</p><pre><code class="language-julia hljs">julia&gt; using JuMP

julia&gt; function an_incorrect_way_to_build_with_multithreading()
           model = Model()
           @variable(model, x[1:10])
           Threads.@threads for i in 1:10
               @constraint(model, x[i] &lt;= i)
           end
           return model
       end

julia&gt; an_incorrect_way_to_build_with_multithreading()
A JuMP Model
├ solver: none
├ objective_sense: FEASIBILITY_SENSE
├ num_variables: 10
├ num_constraints: 7
│ └ AffExpr in MOI.LessThan{Float64}: 7
└ Names registered in the model
  └ :x</code></pre><p>Unfortunately, this model is wrong. It has only seven constraints instead of the expected ten. This happens because JuMP models are not thread-safe. Code that uses multi-threading to simultaneously modify or optimize a single JuMP model across threads may error, crash Julia, or silently produce incorrect results.</p><p>The correct way to build a JuMP model with multi-threading is to build the data structures in parallel, but add them to the JuMP model in a thread-safe way:</p><pre><code class="language-julia hljs">julia&gt; using JuMP

julia&gt; function a_correct_way_to_build_with_multithreading()
           model = Model()
           @variable(model, x[1:10])
           my_lock = Threads.ReentrantLock()
           Threads.@threads for i in 1:10
               con = @build_constraint(x[i] &lt;= i)
               Threads.lock(my_lock) do
                   add_constraint(model, con)
               end
           end
           return model
       end

julia&gt; a_correct_way_to_build_with_multithreading()
A JuMP Model
├ solver: none
├ objective_sense: FEASIBILITY_SENSE
├ num_variables: 10
├ num_constraints: 10
│ └ AffExpr in MOI.LessThan{Float64}: 10
└ Names registered in the model
  └ :x</code></pre><div class="admonition is-warning" id="Warning-e337ba74eace35e1"><header class="admonition-header">Warning<a class="admonition-anchor" href="#Warning-e337ba74eace35e1" title="Permalink"></a></header><div class="admonition-body"><p><strong>Do not use multi-threading to build a JuMP model just because your original code is slow.</strong> In most cases, we find that the reason for the bottleneck is not JuMP, but in how you are constructing the problem data, and that with changes, it is possible to build a model in a way that is not the bottleneck in the solution process. If you need help to make your code run faster, ask for help on the <a href="https://jump.dev/forum">community forum</a>. Make sure to include a reproducible example of your code.</p></div></div><h2 id="Distributed-computing"><a class="docs-heading-anchor" href="#Distributed-computing">Distributed computing</a><a id="Distributed-computing-1"></a><a class="docs-heading-anchor-permalink" href="#Distributed-computing" title="Permalink"></a></h2><p>To use distributed computing with Julia, use the <code>Distributed</code> package:</p><pre><code class="language-julia hljs">julia&gt; import Distributed</code></pre><p>Like multi-threading, we need to tell Julia how many processes to add. We can do this either by starting Julia with the <code>-p N</code> command line argument, or by using <code>Distributed.addprocs</code>:</p><pre><code class="language-julia hljs">julia&gt; import Pkg

julia&gt; project = Pkg.project();

julia&gt; workers = Distributed.addprocs(4; exeflags = &quot;--project=$(project.path)&quot;)
4-element Vector{Int64}:
 2
 3
 4
 5</code></pre><div class="admonition is-warning" id="Warning-5ffd2d61861df8c9"><header class="admonition-header">Warning<a class="admonition-anchor" href="#Warning-5ffd2d61861df8c9" title="Permalink"></a></header><div class="admonition-body"><p>Not loading the parent environment with <code>--project</code> is a common mistake.</p></div></div><p>The added processes are &quot;worker&quot; processes that we can use to do computation with. They are orchestrated by the process with the id <code>1</code>. You can check what process the code is currently running on using <code>Distributed.myid()</code></p><pre><code class="language-julia hljs">julia&gt; Distributed.myid()
1</code></pre><p>As a general rule, to get maximum performance you should add as many processes as you have logical cores available.</p><p>Unlike the <code>for</code>-loop approach of multi-threading, distributed computing extends the Julia <code>map</code> function to a &quot;parallel-map&quot; function <code>Distributed.pmap</code>. For each element in the list of arguments to map over, Julia will copy the element to an idle worker process and evaluate the function, passing the element as an input argument.</p><pre><code class="language-julia hljs">julia&gt; function hard_work(i::Int)
           sleep(1.0)
           return Distributed.myid()
       end
hard_work (generic function with 1 method)

julia&gt; Distributed.pmap(hard_work, 1:4)
ERROR: On worker 2:
UndefVarError: #hard_work not defined
Stacktrace:
[...]</code></pre><p>Unfortunately, if you try this code directly, you will get an error message that says <code>On worker 2: UndefVarError: hard_work not defined</code>. The error is thrown because, although process <code>1</code> knows what the <code>hard_work</code> function is, the worker processes do not.</p><p>To fix the error, we need to use <code>Distributed.@everywhere</code>, which evaluates the code on every process:</p><pre><code class="language-julia hljs">julia&gt; Distributed.@everywhere begin
           function hard_work(i::Int)
               sleep(1.0)
               return Distributed.myid()
           end
       end</code></pre><p>Now if we run <code>pmap</code>, we see that it took only 1 second instead of 4, and that it executed on each of the worker processes:</p><pre><code class="language-julia hljs">julia&gt; @time ids = Distributed.pmap(hard_work, 1:4)
  1.202006 seconds (216.39 k allocations: 13.301 MiB, 4.07% compilation time)
4-element Vector{Int64}:
 2
 3
 5
 4</code></pre><div class="admonition is-success" id="Tip-daedebabc7417aba"><header class="admonition-header">Tip<a class="admonition-anchor" href="#Tip-daedebabc7417aba" title="Permalink"></a></header><div class="admonition-body"><p>For more information, read the Julia documentation <a href="https://docs.julialang.org/en/v1/manual/distributed-computing/">Distributed Computing</a>.</p></div></div><h3 id="Example:-parameter-search-with-distributed-computing"><a class="docs-heading-anchor" href="#Example:-parameter-search-with-distributed-computing">Example: parameter search with distributed computing</a><a id="Example:-parameter-search-with-distributed-computing-1"></a><a class="docs-heading-anchor-permalink" href="#Example:-parameter-search-with-distributed-computing" title="Permalink"></a></h3><p>With distributed computing, remember to evaluate all of the code on all of the processes using <code>Distributed.@everywhere</code>, and then write a function which creates a new instance of the model on every evaluation:</p><pre><code class="language-julia hljs">julia&gt; Distributed.@everywhere begin
           using JuMP
           import HiGHS
       end

julia&gt; Distributed.@everywhere begin
           function solve_model_with_right_hand_side(i)
               model = Model(HiGHS.Optimizer)
               set_silent(model)
               @variable(model, x)
               @objective(model, Min, x)
               set_lower_bound(x, i)
               optimize!(model)
               assert_is_solved_and_feasible(sudoku)
               return objective_value(model)
           end
       end

julia&gt; solutions = Distributed.pmap(solve_model_with_right_hand_side, 1:10)
10-element Vector{Float64}:
  1.0
  2.0
  3.0
  4.0
  5.0
  6.0
  7.0
  8.0
  9.0
 10.0</code></pre><h2 id="Parallelism-within-the-solver"><a class="docs-heading-anchor" href="#Parallelism-within-the-solver">Parallelism within the solver</a><a id="Parallelism-within-the-solver-1"></a><a class="docs-heading-anchor-permalink" href="#Parallelism-within-the-solver" title="Permalink"></a></h2><p>Many solvers use parallelism internally. For example, commercial solvers like <a href="../../../packages/Gurobi/#Gurobi.jl">Gurobi.jl</a> and <a href="../../../packages/CPLEX/#CPLEX.jl">CPLEX.jl</a> both parallelize the search in branch-and-bound.</p><p>Solvers supporting internal parallelism will typically support the <a href="../../../moi/reference/models/#MathOptInterface.NumberOfThreads"><code>MOI.NumberOfThreads</code></a> attribute, which you can set using <a href="../../../api/JuMP/#set_attribute"><code>set_attribute</code></a>:</p><pre><code class="language-julia hljs">using JuMP, Gurobi
model = Model(Gurobi.Optimizer)
set_attribute(model, MOI.NumberOfThreads(), 4)</code></pre><h2 id="GPU-parallelism"><a class="docs-heading-anchor" href="#GPU-parallelism">GPU parallelism</a><a id="GPU-parallelism-1"></a><a class="docs-heading-anchor-permalink" href="#GPU-parallelism" title="Permalink"></a></h2><p>JuMP does not support GPU programming, but some solvers support execution on a GPU.</p><p>One example is <a href="../../../packages/SCS/#SCS.jl">SCS.jl</a>, which supports using a GPU to internally solve a system of linear equations. If you are on <code>x86_64</code> Linux machine, do:</p><pre><code class="language-julia hljs">using JuMP, SCS, SCS_GPU_jll
model = Model(SCS.Optimizer)
set_attribute(model, &quot;linear_solver&quot;, SCS.GpuIndirectSolver)</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../rolling_horizon/">« Rolling horizon problems</a><a class="docs-footer-nextpage" href="../pdhg/">Writing a solver interface »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.16.1 on <span class="colophon-date" title="Wednesday 7 January 2026 20:52">Wednesday 7 January 2026</span>. Using Julia version 1.12.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
