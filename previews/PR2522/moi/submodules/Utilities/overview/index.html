<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Overview · JuMP</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-44252521-1', 'auto');
ga('send', 'pageview', {'page': location.pathname + location.search + location.hash});
</script><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../../../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../../../assets/documenter.js"></script><script src="../../../../siteinfo.js"></script><script src="../../../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../../../"><img src="../../../../assets/logo.png" alt="JuMP logo"/></a><div class="docs-package-name"><span class="docs-autofit">JuMP</span></div><form class="docs-search" action="../../../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../../../">Introduction</a></li><li><a class="tocitem" href="../../../../installation/">Installation Guide</a></li><li><input class="collapse-toggle" id="menuitem-3" type="checkbox"/><label class="tocitem" for="menuitem-3"><span class="docs-label">Tutorials</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><input class="collapse-toggle" id="menuitem-3-1" type="checkbox"/><label class="tocitem" for="menuitem-3-1"><span class="docs-label">Getting started</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../../tutorials/Getting started/an_introduction_to_julia/">Getting started with Julia</a></li><li><a class="tocitem" href="../../../../tutorials/Getting started/getting_started_with_JuMP/">Getting started with JuMP</a></li><li><a class="tocitem" href="../../../../tutorials/Getting started/performance_tips/">Performance tips</a></li><li><a class="tocitem" href="../../../../tutorials/Getting started/solvers_and_solutions/">Solvers and Solutions</a></li><li><a class="tocitem" href="../../../../tutorials/Getting started/variables_constraints_objective/">Variables, constraints, and objective functions</a></li><li><a class="tocitem" href="../../../../tutorials/Getting started/working_with_data_files/">Working with Data Files</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-2" type="checkbox"/><label class="tocitem" for="menuitem-3-2"><span class="docs-label">Mixed-integer linear programs</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../../tutorials/Mixed-integer linear programs/callbacks/">Callbacks</a></li><li><a class="tocitem" href="../../../../tutorials/Mixed-integer linear programs/cannery/">The cannery problem</a></li><li><a class="tocitem" href="../../../../tutorials/Mixed-integer linear programs/cutting_stock_column_generation/">Cutting stock</a></li><li><a class="tocitem" href="../../../../tutorials/Mixed-integer linear programs/diet/">The diet problem</a></li><li><a class="tocitem" href="../../../../tutorials/Mixed-integer linear programs/factory_schedule/">The factory schedule example</a></li><li><a class="tocitem" href="../../../../tutorials/Mixed-integer linear programs/finance/">Finance</a></li><li><a class="tocitem" href="../../../../tutorials/Mixed-integer linear programs/geographic_clustering/">Geographical Clustering</a></li><li><a class="tocitem" href="../../../../tutorials/Mixed-integer linear programs/knapsack/">The knapsack problem</a></li><li><a class="tocitem" href="../../../../tutorials/Mixed-integer linear programs/multi/">The multi-commodity flow problem</a></li><li><a class="tocitem" href="../../../../tutorials/Mixed-integer linear programs/n-queens/">N-Queens</a></li><li><a class="tocitem" href="../../../../tutorials/Mixed-integer linear programs/network_flows/">Network Flows</a></li><li><a class="tocitem" href="../../../../tutorials/Mixed-integer linear programs/power_systems/">Power Systems</a></li><li><a class="tocitem" href="../../../../tutorials/Mixed-integer linear programs/prod/">The workforce scheduling problem</a></li><li><a class="tocitem" href="../../../../tutorials/Mixed-integer linear programs/steelT3/">The SteelT3 problem</a></li><li><a class="tocitem" href="../../../../tutorials/Mixed-integer linear programs/sudoku/">Sudoku</a></li><li><a class="tocitem" href="../../../../tutorials/Mixed-integer linear programs/tips_and_tricks/">Tips and tricks</a></li><li><a class="tocitem" href="../../../../tutorials/Mixed-integer linear programs/transp/">The transportation problem</a></li><li><a class="tocitem" href="../../../../tutorials/Mixed-integer linear programs/urban_plan/">The urban planning problem</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-3" type="checkbox"/><label class="tocitem" for="menuitem-3-3"><span class="docs-label">Nonlinear programs</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../../tutorials/Nonlinear programs/clnlbeam/">The clnlbeam problem</a></li><li><a class="tocitem" href="../../../../tutorials/Nonlinear programs/mle/">Maximum likelihood estimation</a></li><li><a class="tocitem" href="../../../../tutorials/Nonlinear programs/nlp_tricks/">Nonlinear tips and tricks</a></li><li><a class="tocitem" href="../../../../tutorials/Nonlinear programs/rocket_control/">Rocket Control</a></li><li><a class="tocitem" href="../../../../tutorials/Nonlinear programs/rosenbrock/">The Rosenbrock function</a></li><li><a class="tocitem" href="../../../../tutorials/Nonlinear programs/space_shuttle_reentry_trajectory/">Space Shuttle Reentry Trajectory</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-4" type="checkbox"/><label class="tocitem" for="menuitem-3-4"><span class="docs-label">Quadratic programs</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../../tutorials/Quadratic programs/portfolio/">Portfolio Optimization</a></li><li><a class="tocitem" href="../../../../tutorials/Quadratic programs/qcp/">Quadratically constrained programs</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-5" type="checkbox"/><label class="tocitem" for="menuitem-3-5"><span class="docs-label">Conic programs</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../../tutorials/Conic programs/logistic_regression/">Logistic Regression</a></li><li><a class="tocitem" href="../../../../tutorials/Conic programs/tips_and_tricks/">Tips and Tricks</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-6" type="checkbox"/><label class="tocitem" for="menuitem-3-6"><span class="docs-label">Semidefinite programs</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../../tutorials/Semidefinite programs/cluster/">K-means clustering via SDP</a></li><li><a class="tocitem" href="../../../../tutorials/Semidefinite programs/corr_sdp/">The correlation problem</a></li><li><a class="tocitem" href="../../../../tutorials/Semidefinite programs/experiment_design/">Experiment Design</a></li><li><a class="tocitem" href="../../../../tutorials/Semidefinite programs/max_cut_sdp/">SDP relaxations: max-cut</a></li><li><a class="tocitem" href="../../../../tutorials/Semidefinite programs/min_distortion/">The minimum distortion problem</a></li><li><a class="tocitem" href="../../../../tutorials/Semidefinite programs/min_ellipse/">Minimum ellipses</a></li><li><a class="tocitem" href="../../../../tutorials/Semidefinite programs/robust_uncertainty/">Robust uncertainty sets</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-7" type="checkbox"/><label class="tocitem" for="menuitem-3-7"><span class="docs-label">Optimization concepts</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../../tutorials/Optimization concepts/benders_decomposition/">Benders Decomposition</a></li><li><a class="tocitem" href="../../../../tutorials/Optimization concepts/benders_lazy_constraints/">Benders Decomposition (Lazy Constraints)</a></li></ul></li></ul></li><li><input class="collapse-toggle" id="menuitem-4" type="checkbox"/><label class="tocitem" for="menuitem-4"><span class="docs-label">Manual</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../../manual/models/">Models</a></li><li><a class="tocitem" href="../../../../manual/variables/">Variables</a></li><li><a class="tocitem" href="../../../../manual/expressions/">Expressions</a></li><li><a class="tocitem" href="../../../../manual/objective/">Objectives</a></li><li><a class="tocitem" href="../../../../manual/constraints/">Constraints</a></li><li><a class="tocitem" href="../../../../manual/containers/">Containers</a></li><li><a class="tocitem" href="../../../../manual/solutions/">Solutions</a></li><li><a class="tocitem" href="../../../../manual/nlp/">Nonlinear Modeling</a></li><li><a class="tocitem" href="../../../../manual/callbacks/">Callbacks</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5" type="checkbox"/><label class="tocitem" for="menuitem-5"><span class="docs-label">API Reference</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../../reference/models/">Models</a></li><li><a class="tocitem" href="../../../../reference/variables/">Variables</a></li><li><a class="tocitem" href="../../../../reference/expressions/">Expressions</a></li><li><a class="tocitem" href="../../../../reference/objectives/">Objectives</a></li><li><a class="tocitem" href="../../../../reference/constraints/">Constraints</a></li><li><a class="tocitem" href="../../../../reference/containers/">Containers</a></li><li><a class="tocitem" href="../../../../reference/solutions/">Solutions</a></li><li><a class="tocitem" href="../../../../reference/nlp/">Nonlinear Modeling</a></li><li><a class="tocitem" href="../../../../reference/callbacks/">Callbacks</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-6" type="checkbox"/><label class="tocitem" for="menuitem-6"><span class="docs-label">Background information</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../../background/should_i_use/">Should I use JuMP?</a></li><li><a class="tocitem" href="../../../../background/algebraic_modeling_languages/">Algebraic modeling languages</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-7" type="checkbox"/><label class="tocitem" for="menuitem-7"><span class="docs-label">Developer Docs</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../../developers/extensions/">Extensions</a></li><li><a class="tocitem" href="../../../../developers/style/">Style Guide</a></li><li><a class="tocitem" href="../../../../developers/roadmap/">Roadmap</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-8" type="checkbox" checked/><label class="tocitem" for="menuitem-8"><span class="docs-label">MathOptInterface</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../">Introduction</a></li><li><input class="collapse-toggle" id="menuitem-8-2" type="checkbox"/><label class="tocitem" for="menuitem-8-2"><span class="docs-label">Background</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../background/motivation/">Motivation</a></li><li><a class="tocitem" href="../../../background/duality/">Duality</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-8-3" type="checkbox"/><label class="tocitem" for="menuitem-8-3"><span class="docs-label">Manual</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../manual/standard_form/">Standard form problem</a></li><li><a class="tocitem" href="../../../manual/models/">Models</a></li><li><a class="tocitem" href="../../../manual/variables/">Variables</a></li><li><a class="tocitem" href="../../../manual/constraints/">Constraints</a></li><li><a class="tocitem" href="../../../manual/solutions/">Solutions</a></li><li><a class="tocitem" href="../../../manual/modification/">Problem modification</a></li><li><a class="tocitem" href="../../../manual/example/">A complete example: solving a knapsack problem</a></li><li><a class="tocitem" href="../../../manual/implementing/">Implementing a solver interface</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-8-4" type="checkbox"/><label class="tocitem" for="menuitem-8-4"><span class="docs-label">API Reference</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../reference/standard_form/">Standard form</a></li><li><a class="tocitem" href="../../../reference/models/">Models</a></li><li><a class="tocitem" href="../../../reference/variables/">Variables</a></li><li><a class="tocitem" href="../../../reference/constraints/">Constraints</a></li><li><a class="tocitem" href="../../../reference/modification/">Modifications</a></li><li><a class="tocitem" href="../../../reference/nonlinear/">Nonlinear programming</a></li><li><a class="tocitem" href="../../../reference/callbacks/">Callbacks</a></li><li><a class="tocitem" href="../../../reference/errors/">Errors</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-8-5" type="checkbox" checked/><label class="tocitem" for="menuitem-8-5"><span class="docs-label">Submodules</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><input class="collapse-toggle" id="menuitem-8-5-1" type="checkbox"/><label class="tocitem" for="menuitem-8-5-1"><span class="docs-label">Benchmarks</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Benchmarks/overview/">Overview</a></li><li><a class="tocitem" href="../../Benchmarks/reference/">API Reference</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-8-5-2" type="checkbox"/><label class="tocitem" for="menuitem-8-5-2"><span class="docs-label">Bridges</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Bridges/overview/">Overview</a></li><li><a class="tocitem" href="../../Bridges/implementation/">Implementation</a></li><li><a class="tocitem" href="../../Bridges/reference/">API Reference</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-8-5-3" type="checkbox"/><label class="tocitem" for="menuitem-8-5-3"><span class="docs-label">FileFormats</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../FileFormats/overview/">Overview</a></li><li><a class="tocitem" href="../../FileFormats/reference/">API Reference</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-8-5-4" type="checkbox" checked/><label class="tocitem" for="menuitem-8-5-4"><span class="docs-label">Utilities</span><i class="docs-chevron"></i></label><ul class="collapsed"><li class="is-active"><a class="tocitem" href>Overview</a><ul class="internal"><li><a class="tocitem" href="#Utilities.Model"><span>Utilities.Model</span></a></li><li><a class="tocitem" href="#Utilities.UniversalFallback"><span>Utilities.UniversalFallback</span></a></li><li><a class="tocitem" href="#Utilities.@model"><span>Utilities.@model</span></a></li><li><a class="tocitem" href="#Utilities.CachingOptimizer"><span>Utilities.CachingOptimizer</span></a></li><li><a class="tocitem" href="#Copy-utilities"><span>Copy utilities</span></a></li><li><a class="tocitem" href="#Fallbacks"><span>Fallbacks</span></a></li></ul></li><li><a class="tocitem" href="../reference/">API Reference</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-8-5-5" type="checkbox"/><label class="tocitem" for="menuitem-8-5-5"><span class="docs-label">Test</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Test/overview/">Overview</a></li></ul></li></ul></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">MathOptInterface</a></li><li><a class="is-disabled">Submodules</a></li><li><a class="is-disabled">Utilities</a></li><li class="is-active"><a href>Overview</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Overview</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/jump-dev/JuMP.jl/blob/master/docs/src/moi/submodules/Utilities/overview.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="The-Utilities-submodule"><a class="docs-heading-anchor" href="#The-Utilities-submodule">The Utilities submodule</a><a id="The-Utilities-submodule-1"></a><a class="docs-heading-anchor-permalink" href="#The-Utilities-submodule" title="Permalink"></a></h1><p>The Utilities submodule provides a variety of functionality for managing <code>MOI.ModelLike</code> objects.</p><h2 id="Utilities.Model"><a class="docs-heading-anchor" href="#Utilities.Model">Utilities.Model</a><a id="Utilities.Model-1"></a><a class="docs-heading-anchor-permalink" href="#Utilities.Model" title="Permalink"></a></h2><p><a href="../reference/#MathOptInterface.Utilities.Model"><code>Utilities.Model</code></a> provides an implementation of a <a href="../../../reference/models/#MathOptInterface.ModelLike"><code>ModelLike</code></a> that efficiently supports all functions and sets defined within MOI. However, given the extensibility of MOI, this might not cover all use cases.</p><p>Create a model as follows:</p><pre><code class="language-julia-repl">julia&gt; model = MOI.Utilities.Model{Float64}()
MOIU.GenericModel{Float64,MOIU.ModelFunctionConstraints{Float64}}</code></pre><h2 id="Utilities.UniversalFallback"><a class="docs-heading-anchor" href="#Utilities.UniversalFallback">Utilities.UniversalFallback</a><a id="Utilities.UniversalFallback-1"></a><a class="docs-heading-anchor-permalink" href="#Utilities.UniversalFallback" title="Permalink"></a></h2><p><a href="../reference/#MathOptInterface.Utilities.UniversalFallback"><code>Utilities.UniversalFallback</code></a> is a layer that sits on top of any <a href="../../../reference/models/#MathOptInterface.ModelLike"><code>ModelLike</code></a> and provides non-specialized (slower) fallbacks for constraints and attributes that the underlying <a href="../../../reference/models/#MathOptInterface.ModelLike"><code>ModelLike</code></a> does not support.</p><p>For example, <a href="../reference/#MathOptInterface.Utilities.Model"><code>Utilities.Model</code></a> doesn&#39;t support some variable attributes like <a href="../../../reference/variables/#MathOptInterface.VariablePrimalStart"><code>VariablePrimalStart</code></a>, so JuMP uses a combination of Universal fallback and <a href="../reference/#MathOptInterface.Utilities.Model"><code>Utilities.Model</code></a> as a generic problem cache:</p><pre><code class="language-julia-repl">julia&gt; model = MOI.Utilities.UniversalFallback(MOI.Utilities.Model{Float64}())
MOIU.UniversalFallback{MOIU.GenericModel{Float64,MOIU.ModelFunctionConstraints{Float64}}}
fallback for MOIU.GenericModel{Float64,MOIU.ModelFunctionConstraints{Float64}}</code></pre><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>Adding a UniversalFallback means that your <code>model</code> will now support all constraints, even if the inner-model does not! This can lead to unexpected behavior.</p></div></div><h2 id="Utilities.@model"><a class="docs-heading-anchor" href="#Utilities.@model">Utilities.@model</a><a id="Utilities.@model-1"></a><a class="docs-heading-anchor-permalink" href="#Utilities.@model" title="Permalink"></a></h2><p>For advanced use cases that need efficient support for functions and sets defined outside of MOI (but still known at compile time), we provide the <a href="../reference/#MathOptInterface.Utilities.@model"><code>Utilities.@model</code></a> macro.</p><p>The <code>@model</code> macro takes a name (for a new type, which must not exist yet), eight tuples specifying the types of constraints that are supported, and then a <code>Bool</code> indicating the type should be a subtype of <code>MOI.AbstractOptimizer</code> (if <code>true</code>) or <code>MOI.ModelLike</code> (if <code>false</code>).</p><p>The eight tuples are in the following order:</p><ol><li>Un-typed scalar sets, e.g., <a href="../../../reference/standard_form/#MathOptInterface.Integer"><code>Integer</code></a></li><li>Typed scalar sets, e.g., <a href="../../../reference/standard_form/#MathOptInterface.LessThan"><code>LessThan</code></a></li><li>Un-typed vector sets, e.g., <a href="../../../reference/standard_form/#MathOptInterface.Nonnegatives"><code>Nonnegatives</code></a></li><li>Typed vector sets, e.g., <a href="../../../reference/standard_form/#MathOptInterface.PowerCone"><code>PowerCone</code></a></li><li>Un-typed scalar functions, e.g., <a href="../../../reference/standard_form/#MathOptInterface.SingleVariable"><code>SingleVariable</code></a></li><li>Typed scalar functions, e.g., <a href="../../../reference/standard_form/#MathOptInterface.ScalarAffineFunction"><code>ScalarAffineFunction</code></a></li><li>Un-typed vector functions, e.g., <a href="../../../reference/standard_form/#MathOptInterface.VectorOfVariables"><code>VectorOfVariables</code></a></li><li>Typed vector functions, e.g., <a href="../../../reference/standard_form/#MathOptInterface.VectorAffineFunction"><code>VectorAffineFunction</code></a></li></ol><p>The tuples can contain more than one element. Typed-sets should be speficied without their type parameter, i.e., <code>MOI.LessThan</code>, not <code>MOI.LessThan{Float64}</code>.</p><p>Here is an example:</p><pre><code class="language-julia-repl">julia&gt; MOI.Utilities.@model(
           MyNewModel,
           (MOI.Integer,),                  # Un-typed scalar sets
           (MOI.GreaterThan,),              # Typed scalar sets
           (MOI.Nonnegatives,),             # Un-typed vector sets
           (MOI.PowerCone,),                # Typed vector sets
           (MOI.SingleVariable,),           # Un-typed scalar functions
           (MOI.ScalarAffineFunction,),     # Typed scalar functions
           (MOI.VectorOfVariables,),        # Un-typed vector functions
           (MOI.VectorAffineFunction,),     # Typed vector functions
           true,                            # &lt;:MOI.AbstractOptimizer?
       )
MathOptInterface.Utilities.GenericOptimizer{T,MyNewModelFunctionConstraints{T}} where T

julia&gt; model = MyNewModel{Float64}()
MOIU.GenericOptimizer{Float64,MyNewModelFunctionConstraints{Float64}}</code></pre><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p><code>MyNewModel</code> supports every <code>SingleVariable</code>-in-Set constraint, as well as <a href="../../../reference/standard_form/#MathOptInterface.SingleVariable"><code>SingleVariable</code></a>, <a href="../../../reference/standard_form/#MathOptInterface.ScalarAffineFunction"><code>ScalarAffineFunction</code></a>, and <a href="../../../reference/standard_form/#MathOptInterface.ScalarQuadraticFunction"><code>ScalarQuadraticFunction</code></a> objective functions. Implement <code>MOI.supports</code> as needed to forbid constraint and objective function combinations.</p></div></div><p>As another example, <a href="https://github.com/chkwon/PATHSolver.jl">PATHSolver</a>, which only supports <a href="../../../reference/standard_form/#MathOptInterface.VectorAffineFunction"><code>VectorAffineFunction</code></a>-in-<a href="../../../reference/standard_form/#MathOptInterface.Complements"><code>Complements</code></a> defines its optimizer as:</p><pre><code class="language-julia-repl">julia&gt; MOI.Utilities.@model(
           PathOptimizer,
           (),  # Scalar sets
           (),  # Typed scalar sets
           (MOI.Complements,),  # Vector sets
           (),  # Typed vector sets
           (),  # Scalar functions
           (),  # Typed scalar functions
           (),  # Vector functions
           (MOI.VectorAffineFunction,),  # Typed vector functions
           true,  # is_optimizer
       )
MathOptInterface.Utilities.GenericOptimizer{T,MathOptInterface.Utilities.VectorOfConstraints{MathOptInterface.VectorAffineFunction{T},MathOptInterface.Complements}} where T</code></pre><p>However, <code>PathOptimizer</code> does not support some <code>SingleVariable</code>-in-Set constraints, so we must explicitly define:</p><pre><code class="language-julia-repl">julia&gt; function MOI.supports_constraint(
           ::PathOptimizer,
           ::Type{MOI.SingleVariable},
           ::Type{Union{&lt;:MOI.Semiinteger,MOI.Semicontinuous,MOI.ZeroOne,MOI.Integer}}
       )
           return false
       end</code></pre><p>Finally, PATH doesn&#39;t support an objective function, so we need to add:</p><pre><code class="language-julia-repl">julia&gt; MOI.supports(::PathOptimizer, ::MOI.ObjectiveFunction) = false</code></pre><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>This macro creates a new type, so it must be called from the top-level of a module, e.g., it cannot be called from inside a function.</p></div></div><h2 id="Utilities.CachingOptimizer"><a class="docs-heading-anchor" href="#Utilities.CachingOptimizer">Utilities.CachingOptimizer</a><a id="Utilities.CachingOptimizer-1"></a><a class="docs-heading-anchor-permalink" href="#Utilities.CachingOptimizer" title="Permalink"></a></h2><p>A [<code>Utilities.CachingOptimizer</code>] is an MOI layer that abstracts the difference between solvers that support incremental modification (e.g., they support adding variables one-by-one), and solvers that require the entire problem in a single API call (e.g., they only accept the <code>A</code>, <code>b</code> and <code>c</code> matrices of a linear program).</p><p>It has two parts:</p><ol><li>A cache, where the model can be built and modified incrementally</li><li>An optimizer, which is used to solve the problem</li></ol><pre><code class="language-julia-repl">julia&gt; model = MOI.Utilities.CachingOptimizer(
           MOI.Utilities.Model{Float64}(),
           PathOptimizer{Float64}(),
       )
MOIU.CachingOptimizer{MOIU.GenericOptimizer{Float64,MOIU.VectorOfConstraints{MOI.VectorAffineFunction{Float64},MOI.Complements}},MOIU.GenericModel{Float64,MOIU.ModelFunctionConstraints{Float64}}}
in state ATTACHED_OPTIMIZER
in mode AUTOMATIC
with model cache MOIU.GenericModel{Float64,MOIU.ModelFunctionConstraints{Float64}}
with optimizer MOIU.GenericOptimizer{Float64,MOIU.VectorOfConstraints{MOI.VectorAffineFunction{Float64},MOI.Complements}}</code></pre><p>A <a href="../reference/#MathOptInterface.Utilities.CachingOptimizer"><code>Utilities.CachingOptimizer</code></a> may be in one of three possible states:</p><ul><li><code>NO_OPTIMIZER</code>: The CachingOptimizer does not have any optimizer.</li><li><code>EMPTY_OPTIMIZER</code>: The CachingOptimizer has an empty optimizer, and it is not synchronized with the cached model. Modifications are forwarded to the cache, but <em>not</em> to the optimizer.</li><li><code>ATTACHED_OPTIMIZER</code>: The CachingOptimizer has an optimizer, and it is synchronized with the cached model. Modifications are forwarded to the optimizer. If the optimizer does not support modifications, and error will be thrown.</li></ul><p>Use <a href="../reference/#MathOptInterface.Utilities.reset_optimizer"><code>Utilities.reset_optimizer</code></a> to go from <code>ATTACHED_OPTIMIZER</code> to <code>EMPTY_OPTIMIZER</code>:</p><pre><code class="language-julia-repl">julia&gt; MOI.Utilities.reset_optimizer(model)

julia&gt; model
MOIU.CachingOptimizer{MOIU.GenericOptimizer{Float64,MOIU.VectorOfConstraints{MOI.VectorAffineFunction{Float64},MOI.Complements}},MOIU.GenericModel{Float64,MOIU.ModelFunctionConstraints{Float64}}}
in state EMPTY_OPTIMIZER
in mode AUTOMATIC
with model cache MOIU.GenericModel{Float64,MOIU.ModelFunctionConstraints{Float64}}
with optimizer MOIU.GenericOptimizer{Float64,MOIU.VectorOfConstraints{MOI.VectorAffineFunction{Float64},MOI.Complements}}</code></pre><p>Use <a href="../reference/#MathOptInterface.Utilities.attach_optimizer"><code>Utilities.attach_optimizer</code></a> to go from <code>EMPTY_OPTIMIZER</code> to <code>ATTACHED_OPTIMIZER</code>:</p><pre><code class="language-julia-repl">julia&gt; MOI.Utilities.attach_optimizer(model)

julia&gt; model
MOIU.CachingOptimizer{MOIU.GenericOptimizer{Float64,MOIU.VectorOfConstraints{MOI.VectorAffineFunction{Float64},MOI.Complements}},MOIU.GenericModel{Float64,MOIU.ModelFunctionConstraints{Float64}}}
in state ATTACHED_OPTIMIZER
in mode AUTOMATIC
with model cache MOIU.GenericModel{Float64,MOIU.ModelFunctionConstraints{Float64}}
with optimizer MOIU.GenericOptimizer{Float64,MOIU.VectorOfConstraints{MOI.VectorAffineFunction{Float64},MOI.Complements}}</code></pre><div class="admonition is-info"><header class="admonition-header">Info</header><div class="admonition-body"><p>You must be in <code>ATTACHED_OPTIMIZER</code> to use <a href="../../../reference/models/#MathOptInterface.optimize!"><code>optimize!</code></a>.</p></div></div><p>Use <a href="../reference/#MathOptInterface.Utilities.drop_optimizer"><code>Utilities.drop_optimizer</code></a> to go from any state to <code>NO_OPTIMIZER</code>:</p><pre><code class="language-julia-repl">julia&gt; MOI.Utilities.drop_optimizer(model)

julia&gt; model
MOIU.CachingOptimizer{MOIU.GenericOptimizer{Float64,MOIU.VectorOfConstraints{MOI.VectorAffineFunction{Float64},MOI.Complements}},MOIU.GenericModel{Float64,MOIU.ModelFunctionConstraints{Float64}}}
in state NO_OPTIMIZER
in mode AUTOMATIC
with model cache MOIU.GenericModel{Float64,MOIU.ModelFunctionConstraints{Float64}}
with optimizer nothing</code></pre><p>Pass an empty optimizer to <a href="../reference/#MathOptInterface.Utilities.reset_optimizer"><code>Utilities.reset_optimizer</code></a> to go from <code>NO_OPTIMIZER</code> to <code>EMPTY_OPTIMIZER</code>:</p><pre><code class="language-julia-repl">julia&gt; MOI.Utilities.reset_optimizer(model, PathOptimizer{Float64}())

julia&gt; model
MOIU.CachingOptimizer{MOIU.GenericOptimizer{Float64,MOIU.VectorOfConstraints{MOI.VectorAffineFunction{Float64},MOI.Complements}},MOIU.GenericModel{Float64,MOIU.ModelFunctionConstraints{Float64}}}
in state EMPTY_OPTIMIZER
in mode AUTOMATIC
with model cache MOIU.GenericModel{Float64,MOIU.ModelFunctionConstraints{Float64}}
with optimizer MOIU.GenericOptimizer{Float64,MOIU.VectorOfConstraints{MOI.VectorAffineFunction{Float64},MOI.Complements}}</code></pre><p>Deciding when to attach and reset the optimizer is tedious, and you will often write code like this:</p><pre><code class="language-julia">try
    # modification
catch
    MOI.Utilities.reset_optimizer(model)
    # Re-try modification
end</code></pre><p>To make this easier, <a href="../reference/#MathOptInterface.Utilities.CachingOptimizer"><code>Utilities.CachingOptimizer</code></a> has two modes of operation:</p><ul><li><code>AUTOMATIC</code>: The <code>CachingOptimizer</code> changes its state when necessary. Attempting to add a constraint or perform a modification not supported by the optimizer results in a drop to <code>EMPTY_OPTIMIZER</code> mode.</li><li><code>MANUAL</code>: The user must change the state of the <code>CachingOptimizer</code>. Attempting to perform an operation in the incorrect state results in an error.</li></ul><p>By default, <code>AUTOMATIC</code> mode is chosen. However, you can create a <code>CachingOptimizer</code> in <code>MANUAL</code> mode as follows:</p><pre><code class="language-julia-repl">julia&gt; model = MOI.Utilities.CachingOptimizer(
           MOI.Utilities.Model{Float64}(),
           MOI.Utilities.MANUAL,
       )
MOIU.CachingOptimizer{MOI.AbstractOptimizer,MOIU.GenericModel{Float64,MOIU.ModelFunctionConstraints{Float64}}}
in state NO_OPTIMIZER
in mode MANUAL
with model cache MOIU.GenericModel{Float64,MOIU.ModelFunctionConstraints{Float64}}
with optimizer nothing

julia&gt; MOI.Utilities.reset_optimizer(model, PathOptimizer{Float64}())

julia&gt; model
MOIU.CachingOptimizer{MOI.AbstractOptimizer,MOIU.GenericModel{Float64,MOIU.ModelFunctionConstraints{Float64}}}
in state EMPTY_OPTIMIZER
in mode MANUAL
with model cache MOIU.GenericModel{Float64,MOIU.ModelFunctionConstraints{Float64}}
with optimizer MOIU.GenericOptimizer{Float64,MOIU.VectorOfConstraints{MOI.VectorAffineFunction{Float64},MOI.Complements}}</code></pre><h2 id="Copy-utilities"><a class="docs-heading-anchor" href="#Copy-utilities">Copy utilities</a><a id="Copy-utilities-1"></a><a class="docs-heading-anchor-permalink" href="#Copy-utilities" title="Permalink"></a></h2><div class="admonition is-info"><header class="admonition-header">Info</header><div class="admonition-body"><p>This section is unfinished.</p></div></div><h3 id="Allocate-Load-API"><a class="docs-heading-anchor" href="#Allocate-Load-API">Allocate-Load API</a><a id="Allocate-Load-API-1"></a><a class="docs-heading-anchor-permalink" href="#Allocate-Load-API" title="Permalink"></a></h3><p>The Allocate-Load API allows solvers that do not support loading the problem incrementally to implement <a href="../../../reference/models/#MathOptInterface.copy_to"><code>copy_to</code></a> in a way that still allows transformations to be applied in the copy between the cache and the model if the transformations are implemented as MOI layers implementing the Allocate-Load API.</p><p>Loading a model using the Allocate-Load interface consists of two passes through the model data:</p><ol><li>the allocate pass where the model typically records the necessary information about the constraints and attributes such as their number and size. This information may be used by the solver to allocate datastructures of appropriate size.</li><li>the load pass where the model typically loads the constraint and attribute data to the model.</li></ol><p>The description above only gives a suggestion of what to achieve in each pass. In fact the exact same constraint and attribute data is provided to each pass, so an implementation of the Allocate-Load API is free to do whatever is more convenient in each pass.</p><p>The main difference between each pass, apart from the fact that one is executed before the other during a copy, is that the allocate pass needs to create and return new variable and constraint indices, while during the load pass the appropriate constraint indices are provided.</p><p>The Allocate-Load API is <strong>not</strong> meant to be used outside a copy operation, that is, the interface is not meant to be used to create new constraints with <a href="../reference/#MathOptInterface.Utilities.allocate_constraint"><code>Utilities.allocate_constraint</code></a> followed by <a href="../reference/#MathOptInterface.Utilities.load_constraint"><code>Utilities.load_constraint</code></a> after a solve. This means that the order in which the different functions of the API are called is fixed by <a href="../reference/#MathOptInterface.Utilities.allocate_load"><code>Utilities.allocate_load</code></a> and models implementing the API can rely on the fact that functions will be called in this order. That is, it can be assumed that the different functions will the called in the following order:</p><ol><li><a href="../reference/#MathOptInterface.Utilities.allocate_variables"><code>Utilities.allocate_variables</code></a></li><li><a href="../reference/#MathOptInterface.Utilities.allocate"><code>Utilities.allocate</code></a> and <a href="../reference/#MathOptInterface.Utilities.allocate_constraint"><code>Utilities.allocate_constraint</code></a></li><li><a href="../reference/#MathOptInterface.Utilities.load_variables"><code>Utilities.load_variables</code></a></li><li><a href="../reference/#MathOptInterface.Utilities.load"><code>Utilities.load</code></a> and <a href="../reference/#MathOptInterface.Utilities.load_constraint"><code>Utilities.load_constraint</code></a></li></ol><p>If you choose to implement the Allocate-Load API, also implement;</p><pre><code class="language-julia">function MOI.copy_to(dest::Optimizer, src::MOI.ModelLike; kwargs...)
    return MOI.Utilities.automatic_copy_to(dest, src; kwargs...)
end

function MOI.Utilities.supports_allocate_load(
    model::Optimizer,
    copy_names::Bool,
)
    # If you support names...
    return true
    # Otherwise...
    return !copy_names
end</code></pre><p>See <a href="../reference/#MathOptInterface.Utilities.supports_allocate_load"><code>Utilities.supports_allocate_load</code></a> for more details.</p><h2 id="Fallbacks"><a class="docs-heading-anchor" href="#Fallbacks">Fallbacks</a><a id="Fallbacks-1"></a><a class="docs-heading-anchor-permalink" href="#Fallbacks" title="Permalink"></a></h2><p>The value of some attributes can be inferred from the value of other attributes.</p><p>For example, the value of <a href="../../../reference/models/#MathOptInterface.ObjectiveValue"><code>ObjectiveValue</code></a> can be computed using <a href="../../../reference/models/#MathOptInterface.ObjectiveFunction"><code>ObjectiveFunction</code></a> and <a href="../../../reference/variables/#MathOptInterface.VariablePrimal"><code>VariablePrimal</code></a>.</p><p>When a solver gives direct access to an attribute, it is better to return this value. However, if this is not the case, <a href="../reference/#MathOptInterface.Utilities.get_fallback"><code>Utilities.get_fallback</code></a> can be used instead. For example:</p><pre><code class="language-julia">function MOI.get(model::Optimizer, attr::MOI.ObjectiveFunction)
    return MOI.Utilities.get_fallback(model, attr)
end</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../FileFormats/reference/">« API Reference</a><a class="docs-footer-nextpage" href="../reference/">API Reference »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Sunday 25 April 2021 05:08">Sunday 25 April 2021</span>. Using Julia version 1.0.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
